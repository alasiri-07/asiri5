<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام إدارة الأزمات</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- مكتبة لمعالجة ملفات الإكسل -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root {
            --primary-color: #1a5f7a;
            --secondary-color: #57c5b6;
            --accent-color: #159895;
            --rain-color: #4285f4; /* Blue */
            --flood-color: #ea4335; /* Red */
            --rockfall-color: #343a40; /* Black */
            --sandstorm-color: #ff9800; /* Orange */
            --yellow-color: #FFC107; /* Yellow */
            --brown-color: #8B4513; /* Brown */
            --light-bg: #f9f9f9;
            --text-color: #333;
            --text-light: #666;
            --white: #fff;
            --shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --success-color: #28a745;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            margin: 0;
            background-color: #f5f7fa;
            color: var(--text-color);
            direction: rtl;
            text-align: right;
            line-height: 1.7;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 40px auto;
            background-color: var(--white);
            box-shadow: var(--shadow);
            border-radius: 15px;
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: var(--white);
            padding: 40px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><polygon fill="rgba(255,255,255,0.05)" points="0,100 100,0 100,100"/></svg>');
            background-size: cover;
            z-index: 1;
        }
        
        header h1 {
            margin: 0;
            font-size: 2.8rem;
            font-weight: 700;
            position: relative;
            z-index: 2;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .section {
            padding: 50px 40px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            gap: 50px;
            transition: var(--transition);
            position: relative;
        }
        
        .section:last-child {
            border-bottom: none;
        }
        
        .section:hover {
            background-color: var(--light-bg);
        }
        
        .section:hover .section-icon {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .section h2 {
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-top: 0;
            margin-bottom: 20px;
            font-weight: 700;
            position: relative;
            padding-bottom: 10px;
        }
        
        .section h2::after {
            content: '';
            position: absolute;
            right: 0;
            bottom: 0;
            width: 60px;
            height: 3px;
            background-color: var(--secondary-color);
        }
        
        .section p {
            font-size: 1.1rem;
            flex: 1;
            color: var(--text-light);
            margin-bottom: 0;
        }
        
        .section-icon {
            flex: 0 0 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3.5rem;
            color: var(--white);
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            border-radius: 20px;
            width: 120px;
            height: 120px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            z-index: 1;
        }
        
        .section-content {
            flex: 2;
            position: relative;
        }
        
        .section-link {
            display: inline-block;
            margin-top: 15px;
            padding: 10px 25px;
            background-color: var(--secondary-color);
            color: white;
            text-decoration: none;
            border-radius: 30px;
            font-weight: 500;
            transition: var(--transition);
        }
        
        .section-link:hover {
            background-color: var(--accent-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        footer {
            background-color: var(--primary-color);
            color: var(--white);
            text-align: center;
            padding: 25px;
            font-size: 1rem;
            position: relative;
        }
        
        footer::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--secondary-color), var(--accent-color));
        }
        
        footer p {
            margin: 0;
            font-weight: 300;
        }
        
        .system-container {
            width: 90%;
            max-width: 800px;
            margin: 40px auto;
            background-color: var(--white);
            box-shadow: var(--shadow);
            border-radius: 15px;
            overflow: hidden;
            display: none;
        }
        
        .page {
            padding: 20px;
            display: none;
        }
        
        .system-header {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: var(--white);
            padding: 25px;
            text-align: center;
        }
        
        .system-header h1 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .report-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .report-type {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }
        
        .report-type:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }
        
        .report-type i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: block;
        }
        
        .report-type.rain { color: var(--rain-color); border-color: var(--rain-color); }
        .report-type.flood { color: var(--flood-color); border-color: var(--flood-color); }
        .report-type.rockfall { color: var(--rockfall-color); border-color: var(--rockfall-color); }
        .report-type.sandstorm { color: var(--sandstorm-color); border-color: var(--sandstorm-color); }
        .report-type.yellow { color: var(--yellow-color); border-color: var(--yellow-color); }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
            margin-bottom: 15px;
            gap: 10px;
        }
        
        .nav-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            font-weight: 500;
            font-size: 1rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex: 1;
        }
        
        .nav-btn:hover {
            background: var(--accent-color);
            transform: translateY(-2px);
        }
        
        .nav-btn.back-btn {
            background-color: #6c757d;
        }
        .nav-btn.back-btn:hover {
            background-color: #5a6268;
        }
        
        .empty-page {
            text-align: center;
            padding: 50px 20px;
            color: var(--text-light);
        }
        
        .empty-page i {
            font-size: 4rem;
            color: var(--secondary-color);
            margin-bottom: 20px;
        }
        
        .empty-page h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .info-tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
            margin-right: 5px;
        }
        
        .info-tooltip .tooltip-text {
            visibility: hidden;
            width: 300px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            right: 50%;
            margin-right: -150px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .info-tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .report-form {
            padding: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Tajawal', sans-serif;
            box-sizing: border-box;
        }
        
        select.form-control {
            padding: 9px;
        }
        
        .form-row {
            display: flex;
            gap: 10px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .kilometer-sign {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .kilometer-sign input {
            width: 60px;
            text-align: center;
        }
        
        .kilometer-sign span {
            font-weight: bold;
        }
        
        .vehicles-container {
            margin-top: 10px;
            border: 1px solid #eee;
            padding: 10px;
            border-radius: 5px;
        }
        
        .vehicle-item {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #eee;
        }
        
        .vehicle-item:last-child {
            border-bottom: none;
        }
        
        .copy-btn {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            margin-top: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .copy-btn:hover {
            background-color: #218838;
        }
        
        .fatal-report { background-color: #ffebee; border-left: 4px solid var(--danger-color); padding: 15px; }
        .dangerous-report { background-color: #fff8e1; border-left: 4px solid var(--warning-color); padding: 15px; }
        .injury-report { background-color: #fffde7; border-left: 4px solid var(--yellow-color); padding: 15px; }
        .normal-report { background-color: #e3f2fd; border-left: 4px solid var(--rain-color); padding: 15px; }
        
        .weather-report { background-color: #e8f5e9; border-left: 4px solid #4caf50; padding: 15px; }
        .sandstorm-report { background-color: #fff3e0; border-left: 4px solid var(--sandstorm-color); padding: 15px; }
        .waterpool-report { background-color: #e3f2fd; border-left: 4px solid var(--rain-color); padding: 15px; }
        .flood-report { background-color: #ffebee; border-left: 4px solid var(--flood-color); padding: 15px; }
        .erosion-report { background-color: #efebe9; border-left: 4px solid var(--brown-color); padding: 15px; }
        .rockfall-report { background-color: #f3e5f5; border-left: 4px solid var(--rockfall-color); padding: 15px; }
        
        .settings-form {
            padding: 20px;
        }
        
        .settings-section {
            margin-bottom: 30px;
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
        }
        
        .settings-section h3 {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 2px solid var(--secondary-color);
        }
        
        .data-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
        }
        
        .data-item {
            padding: 5px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .data-item:last-child {
            border-bottom: none;
        }


        .data-item.selected {
            background-color: var(--secondary-color);
            color: white;
        }

        .item-actions i {
            cursor: pointer;
            margin: 0 5px;
            color: var(--text-light);
            transition: var(--transition);
        }
        .item-actions i:hover {
            color: var(--primary-color);
        }
        .item-actions .fa-trash:hover {
            color: var(--flood-color);
        }
        
        .save-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            margin-top: 10px;
        }
        
        .save-btn:hover {
            background-color: var(--primary-color);
        }

        /* Toast Notification */
        .toast {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 16px;
            position: fixed;
            z-index: 2100;
            left: 50%;
            transform: translateX(-50%);
            bottom: 30px;
            font-size: 17px;
            opacity: 0;
            transition: visibility 0s 0.5s, opacity 0.5s linear;
        }


        .toast.show {
            visibility: visible;
            opacity: 1;
            transition: opacity 0.5s linear;
        }


        /* Custom Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-dialog {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 450px;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .modal-overlay.show .modal-dialog {
            transform: scale(1);
        }
        .modal-dialog h3 {
            margin-top: 0;
            color: var(--primary-color);
        }
        .modal-dialog p {
            color: var(--text-light);
            margin-bottom: 20px;
        }
        .modal-dialog .form-group {
            margin-bottom: 20px;
        }
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 25px;
        }
        .modal-btn {
            padding: 10px 25px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            font-weight: 500;
            transition: var(--transition);
        }
        .modal-btn.confirm {
            background-color: var(--accent-color);
            color: white;
        }
        .modal-btn.confirm:hover {
            background-color: var(--primary-color);
        }
        .modal-btn.cancel {
            background-color: #ddd;
            color: #333;
        }
        .modal-btn.cancel:hover {
            background-color: #ccc;
        }


        .excel-upload-container {
            border: 2px dashed var(--primary-color);
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            background-color: #f8fbff;
            margin-bottom: 25px;
        }
        
        .excel-upload-container p {
            margin-bottom: 15px;
            font-size: 1.1em;
            color: #555;
        }
        
        .excel-upload-container .upload-btn {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .excel-upload-container .upload-btn:hover {
            background-color: var(--accent-color);
        }
        
        .excel-upload-container .file-name {
            margin-top: 15px;
            font-size: 0.95em;
            color: #666;
        }
        
        .excel-upload-container .instructions {
            margin-top: 20px;
            padding: 15px;
            background-color: #f0f7ff;
            border-radius: 8px;
            font-size: 0.95em;
            color: #444;
            text-align: right;
        }
        
        .excel-upload-container .instructions h4 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .excel-upload-container .instructions ul {
            text-align: right;
            padding-right: 20px;
            list-style-type: '✓ ';
        }
        
        .excel-upload-container .instructions li {
            margin-bottom: 8px;
        }

        /* START: Styles for Weekly Accident Statistics */
        .weekly-stats-container {
            max-width: 800px;
            margin: 20px auto;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border: 1px solid #eee;
        }
        .weekly-stats-container h2 {
            color: var(--primary-color);
            text-align: center;
        }
        .stats-counter {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
            flex-wrap: wrap;
        }
        .stats-counter label {
            width: 120px;
            font-weight: bold;
            margin-left: 10px;
        }
        .stats-counter button {
            width: 40px;
            height: 40px;
            font-size: 20px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
        }
        .stats-counter button:hover {
            background-color: var(--accent-color);
        }
        .stats-counter input {
            width: 60px;
            height: 36px;
            text-align: center;
            font-size: 16px;
            margin: 0 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .stats-counter .total {
            margin-right: 10px;
            font-weight: bold;
        }
        .stats-report {
            margin-top: 30px;
            padding: 20px;
            background-color: #e8f4fc;
            border-radius: 5px;
            line-height: 2;
            white-space: pre-line;
            font-size: 18px;
            text-align: right;
        }
        .stats-report h2 {
            color: #2c3e50;
            text-align: center;
            margin-top: 0;
        }
        .stats-date-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        .stats-date-controls input {
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 60px;
        }
        .stats-buttons {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 10px;
        }
        .stats-buttons button {
            padding: 10px 20px;
            background-color: var(--success-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-family: 'Tajawal', sans-serif;
            transition: var(--transition);
        }
        .stats-buttons button:hover {
            opacity: 0.9;
        }
        .stats-buttons button.copy {
            background-color: var(--rain-color);
        }
        /* END: Styles for Weekly Accident Statistics */
        
        /* New styles for weather reports */
        .yellow-rain-report {
            background-color: #fffde7;
            border-left: 4px solid var(--yellow-color);
            padding: 15px;
        }
        .weather-red-report {
            background-color: #ffebee;
            border-left: 4px solid var(--flood-color);
            padding: 15px;
        }
        
        @media (max-width: 768px) {
            .section {
                flex-direction: column;
                gap: 30px;
                text-align: center;
                padding: 40px 20px;
            }
            
            .section h2::after {
                right: 50%;
                transform: translateX(50%);
            }
            
            header h1 {
                font-size: 2.2rem;
            }
            
            .section-icon {
                margin-bottom: 20px;
            }
            
            .report-types {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- الصفحة الرئيسية -->
    <div id="main-container" class="container">
        <header>
            <h1>نظام إدارة الأزمات</h1>
        </header>

        <div class="section">
            <div class="section-icon">
                <i class="fas fa-car-crash"></i>
            </div>
            <div class="section-content">
                <h2>الحوادث المرورية</h2>
                <p>نقدم في هذا القسم أحدث الإحصائيات والتحليلات حول الحوادث المرورية في المملكة، مع تحديد النقاط السوداء والأسباب الرئيسية للحوادث.</p>
                <a href="#" class="section-link" onclick="showSystem('accidents-system'); return false;">الدخول للنظام</a>
            </div>
        </div>

        <div class="section">
            <div class="section-icon">
                <i class="fas fa-cloud-sun-rain"></i>
            </div>
            <div class="section-content">
                <h2>الظواهر الجوية والكوارث</h2>
                <p>يتابع هذا القسم التغيرات الجوية والكوارث الطبيعية على مدار الساعة، ويقدم تنبؤات دقيقة وتحليلات علمية.</p>
                <a href="#" class="section-link" onclick="showSystem('weather-system'); return false;">الدخول للنظام</a>
            </div>
        </div>

        <div class="section">
            <div class="section-icon">
                <i class="fas fa-map-marked-alt"></i>
            </div>
            <div class="section-content">
                <h2>الخرائط التفاعلية</h2>
                <p>نقدم في هذا القسم خرائط تفاعلية دقيقة تحتوي على معلومات شاملة عن المشاريع التنموية والبنية التحتية والعلامات الكيلومترية.</p>
                <a href="#" class="section-link" onclick="showSystem('maps-system'); return false;">الدخول للنظام</a>
            </div>
        </div>

        <div class="section">
            <div class="section-icon">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="section-content">
                <h2>التقارير الأسبوعية وإحصائيات عامة</h2>
                <p>يوفر هذا القسم تقارير أسبوعية وإحصائيات عامة عن مختلف الأنشطة والخدمات التي يقدمها المركز.</p>
                <a href="#" class="section-link" onclick="showSystem('reports-system'); return false;">الدخول للنظام</a>
            </div>
        </div>

        <div class="section">
            <div class="section-icon">
                <i class="fas fa-robot"></i>
            </div>
            <div class="section-content">
                <h2>الذكاء الاصطناعي (AI)</h2>
                <p>يستعرض هذا القسم تطبيقات الذكاء الاصطناعي التي يستخدمها المركز لتحليل البيانات وتقديم تنبؤات دقيقة.</p>
                <a href="#" class="section-link" onclick="showSystem('ai-system'); return false;">الدخول للنظام</a>
            </div>
        </div>

        <div class="section">
            <div class="section-icon">
                <i class="fas fa-cog"></i>
            </div>
            <div class="section-content">
                <h2>الإعدادات</h2>
                <p>من خلال هذا القسم يمكنك تعديل إعدادات الحساب الشخصي وتخصيص تجربة المستخدم حسب احتياجاتك.</p>
                <a href="#" class="section-link" onclick="showSystem('settings-system'); return false;">الدخول للنظام</a>
            </div>
        </div>

        <footer>
            <p>جميع الحقوق محفوظة &copy; <span id="year"></span> - تصميم : معاذ العوفي - عبد الوهاب عسيري</p>
        </footer>
    </div>


    <!-- نظام الحوادث المرورية -->
    <div id="accidents-system" class="system-container">
        <header class="system-header">
            <h1>نظام الحوادث المرورية</h1>
        </header>
        <div id="accidents-system-main-page" class="page" style="display:block;">
            <div class="report-types">
                <div class="report-type flood" onclick="showPage('fatal-accidents-page', 'accidents-system'); return false;">
                    <i class="fas fa-skull-crossbones"></i>
                    <h3>حوادث وفيات</h3>
                </div>
                <div class="report-type sandstorm" onclick="showPage('dangerous-accidents-page', 'accidents-system'); return false;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>حوادث خطرة <span class="info-tooltip">?<span class="tooltip-text">الحوادث التي تشملها:<br>- حادث باص او نقل معلمات<br>- حوادث الحيوانات السائبة<br>- حوادث ناقلة مواد بترولية<br>- حوادث دهس<br>- حوادث معدة تابعة للمشروع<br>- حوادث بتحويلة على الطريق</span></span></h3>
                </div>
                <div class="report-type yellow" onclick="showPage('injury-accidents-page', 'accidents-system'); return false;">
                    <i class="fas fa-user-injured"></i>
                    <h3>حوادث إصابات</h3>
                </div>
                <div class="report-type rain" onclick="showPage('normal-accidents-page', 'accidents-system'); return false;">
                    <i class="fas fa-car-bump"></i>
                    <h3>حوادث عادية</h3>
                </div>
                 <div class="report-type yellow" onclick="showSystem('settings-system'); return false;">
                    <i class="fas fa-cog"></i>
                    <h3>الإعدادات</h3>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goHome(); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
            </div>
        </div>

        <!-- صفحات نظام الحوادث -->
        <div id="fatal-accidents-page" class="page">
            <div class="report-form fatal-report">
                <h2>🔴 بلاغ عاجل بوقوع حادث مروري 🔴</h2>
                <div class="form-group">
                    <label>🔳 رقم البلاغ في رقابة +:</label>
                    <input type="text" class="form-control" id="fatal-report-number">
                </div>
                <div class="form-group">
                    <label>📍معلومات الموقع:</label>
                    <input type="text" class="form-control" id="fatal-location" placeholder="رابط قوقل ماب">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 اسم الطريق:</label>
                        <input type="text" class="form-control" id="fatal-road-name" list="road-names-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🛣 نوع الطريق:</label>
                        <select class="form-control" id="fatal-road-type">
                            <option value=""></option>
                            <option value="سريع">سريع</option>
                            <option value="مزدوج">مزدوج</option>
                            <option value="مفرد">مفرد</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 رقم الطريق:</label>
                        <input type="text" class="form-control" id="fatal-road-number" list="road-numbers-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🛣 العلامة الكيلومترية:</label>
                        <div class="kilometer-sign">
                            <input type="number" class="form-control" id="fatal-km" placeholder="المتر">
                            <span>+</span>
                            <input type="number" class="form-control" id="fatal-meter" min="1" max="999" placeholder="الكيلو">
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 الاتجاه:</label>
                        <select class="form-control" id="fatal-direction">
                            <option value="رئيسي">رئيسي</option>
                            <option value="عكسي">عكسي</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>🛣 وصف الموقع:</label>
                        <input type="text" class="form-control" id="fatal-location-desc">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 رقم العقد:</label>
                        <input type="text" class="form-control" id="fatal-contract-number" list="contract-numbers-list" value="404" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🛣 اسم المقاول:</label>
                        <input type="text" class="form-control" id="fatal-contractor" list="contractors-list" placeholder="اكتب أو اختر">
                    </div>
                </div>
                
                <h3>🛑 نتيجة الحادث</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>⛑ عدد الإصابات:</label>
                        <input type="text" class="form-control" id="fatal-injuries" value="لايوجد">
                    </div>
                    <div class="form-group">
                        <label>⛑ عدد الوفيات:</label>
                        <input type="number" class="form-control" id="fatal-deaths" min="0">
                    </div>
                </div>
                <div class="form-group">
                    <label>⛑ التلفيات:</label>
                    <input type="text" class="form-control" id="fatal-damages" list="damages-list" value="لايوجد" placeholder="اكتب أو اختر">
                </div>
                
                <div class="form-group">
                    <label>🚙 عدد السيارات:</label>
                    <input type="number" class="form-control" id="fatal-vehicles-count" min="1" value="1" onchange="updateVehicles('fatal')">
                </div>
                
                <div id="fatal-vehicles-container" class="vehicles-container"></div>
                
                <div class="form-group">
                    <label>📃 سبب الحادث:</label>
                    <input type="text" class="form-control" id="fatal-cause" list="causes-list" placeholder="اكتب أو اختر">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>■ الساعة:</label>
                        <input type="text" class="form-control" id="fatal-time">
                    </div>
                    <div class="form-group">
                        <label>■ التاريخ:</label>
                        <input type="text" class="form-control" id="fatal-date">
                    </div>
                    <div class="form-group">
                        <label>■ اليوم:</label>
                        <input type="text" class="form-control" id="fatal-day">
                    </div>
                </div>
                
                <h3>🗒 معلومات عامة</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>🏁زمن تباطؤ حركة المرور:</label>
                        <input type="text" class="form-control" id="fatal-traffic-delay" list="delays-list" value="لا يوجد تباطؤ" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🏞 الحالة الجوية:</label>
                        <select class="form-control" id="fatal-weather">
                            <option value="صحو">صحو</option>
                            <option value="ممطرة">ممطرة</option>
                            <option value="غائم">غائم</option>
                            <option value="ضباب">ضباب</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 حالة الطريق:</label>
                        <input type="text" class="form-control" id="fatal-road-condition" value="جيدة">
                    </div>
                    <div class="form-group">
                        <label>👓 وضوح الرؤية:</label>
                        <select class="form-control" id="fatal-visibility">
                            <option value="واضحة">واضحة</option>
                            <option value="واضحة نسبياَ">واضحة نسبياَ</option>
                            <option value="منعدمة">منعدمة</option>
                        </select>
                    </div>
                </div>
                
                <h3>🚨 الإجراء الذي تم من قبل المقاول</h3>
                <div class="form-group">
                    <label><input type="radio" name="fatal-cleaning" value="تنظيف موقع الحادث" checked> ⿢ تنظيف موقع الحادث.</label>
                    <label><input type="radio" name="fatal-cleaning" value="جاري تنظيف موقع الحادث"> ⿢ جاري تنظيف موقع الحادث.</label>
                </div>
                
                <h3>🚧 المرور والسلامة بالمشروع 🚧</h3>
                
                <button class="copy-btn" onclick="copyReport('fatal')"><i class="fas fa-copy"></i> نسخ وحفظ التقرير</button>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goToMainPage('accidents-system'); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
                <button class="nav-btn" onclick="goHome(); return false;"><i class="fas fa-home"></i> الرئيسية</button>
            </div>
        </div>
        
        <div id="dangerous-accidents-page" class="page">
             <div class="report-form dangerous-report">
                <h2>🔴 بلاغ عاجل بوقوع حادث مروري 🔴</h2>
                <div class="form-group">
                    <label>🔳 رقم البلاغ في رقابة +:</label>
                    <input type="text" class="form-control" id="dangerous-report-number">
                </div>
                <div class="form-group">
                    <label>📍معلومات الموقع:</label>
                    <input type="text" class="form-control" id="dangerous-location" placeholder="رابط قوقل ماب">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 اسم الطريق:</label>
                        <input type="text" class="form-control" id="dangerous-road-name" list="road-names-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🛣 نوع الطريق:</label>
                        <select class="form-control" id="dangerous-road-type">
                            <option value=""></option>
                            <option value="سريع">سريع</option>
                            <option value="مزدوج">مزدوج</option>
                            <option value="مفرد">مفرد</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 رقم الطريق:</label>
                        <input type="text" class="form-control" id="dangerous-road-number" list="road-numbers-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🛣 العلامة الكيلومترية:</label>
                        <div class="kilometer-sign">
                            <input type="number" class="form-control" id="dangerous-km" placeholder="المتر">
                            <span>+</span>
                            <input type="number" class="form-control" id="dangerous-meter" min="1" max="999" placeholder="الكيلو">
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 الاتجاه:</label>
                        <select class="form-control" id="dangerous-direction">
                            <option value="رئيسي">رئيسي</option>
                            <option value="عكسي">عكسي</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>🛣 وصف الموقع:</label>
                        <input type="text" class="form-control" id="dangerous-location-desc">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 رقم العقد:</label>
                        <input type="text" class="form-control" id="dangerous-contract-number" list="contract-numbers-list" value="404" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🛣 اسم المقاول:</label>
                        <input type="text" class="form-control" id="dangerous-contractor" list="contractors-list" placeholder="اكتب أو اختر">
                    </div>
                </div>
                
                <h3>🛑 نتيجة الحادث</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>⛑ عدد الإصابات:</label>
                        <input type="text" class="form-control" id="dangerous-injuries" value="لايوجد">
                    </div>
                    <div class="form-group">
                        <label>⛑ عدد الوفيات:</label>
                        <input type="text" class="form-control" id="dangerous-deaths" value="لايوجد">
                    </div>
                </div>
                <div class="form-group">
                    <label>⛑ التلفيات:</label>
                    <input type="text" class="form-control" id="dangerous-damages" list="damages-list" value="لايوجد" placeholder="اكتب أو اختر">
                </div>
                
                <div class="form-group">
                    <label>🚙 عدد السيارات:</label>
                    <input type="number" class="form-control" id="dangerous-vehicles-count" min="1" value="1" onchange="updateVehicles('dangerous')">
                </div>
                
                <div id="dangerous-vehicles-container" class="vehicles-container"></div>
                
                <div class="form-group">
                    <label>📃 سبب الحادث:</label>
                    <input type="text" class="form-control" id="dangerous-cause" list="causes-list" placeholder="اكتب أو اختر">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>■ الساعة:</label>
                        <input type="text" class="form-control" id="dangerous-time">
                    </div>
                    <div class="form-group">
                        <label>■ التاريخ:</label>
                        <input type="text" class="form-control" id="dangerous-date">
                    </div>
                    <div class="form-group">
                        <label>■ اليوم:</label>
                        <input type="text" class="form-control" id="dangerous-day">
                    </div>
                </div>
                
                <h3>🗒 معلومات عامة</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>🏁زمن تباطؤ حركة المرور:</label>
                        <input type="text" class="form-control" id="dangerous-traffic-delay" list="delays-list" value="لا يوجد تباطؤ" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🏞 الحالة الجوية:</label>
                        <select class="form-control" id="dangerous-weather">
                            <option value="صحو">صحو</option>
                            <option value="ممطرة">ممطرة</option>
                            <option value="غائم">غائم</option>
                            <option value="ضباب">ضباب</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 حالة الطريق:</label>
                        <input type="text" class="form-control" id="dangerous-road-condition" value="جيدة">
                    </div>
                    <div class="form-group">
                        <label>👓 وضوح الرؤية:</label>
                        <select class="form-control" id="dangerous-visibility">
                            <option value="واضحة">واضحة</option>
                            <option value="واضحة نسبياَ">واضحة نسبياَ</option>
                            <option value="منعدمة">منعدمة</option>
                        </select>
                    </div>
                </div>
                
                <h3>🚨 الإجراء الذي تم من قبل المقاول</h3>
                <div class="form-group">
                    <label><input type="radio" name="dangerous-cleaning" value="تنظيف موقع الحادث" checked> ⿢ تنظيف موقع الحادث.</label>
                    <label><input type="radio" name="dangerous-cleaning" value="جاري تنظيف موقع الحادث"> ⿢ جاري تنظيف موقع الحادث.</label>
                </div>
                
                <h3>🚧 المرور والسلامة بالمشروع 🚧</h3>
                
                <button class="copy-btn" onclick="copyReport('dangerous')"><i class="fas fa-copy"></i> نسخ وحفظ التقرير</button>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goToMainPage('accidents-system'); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
                <button class="nav-btn" onclick="goHome(); return false;"><i class="fas fa-home"></i> الرئيسية</button>
            </div>
        </div>
        
        <div id="injury-accidents-page" class="page">
            <div class="report-form injury-report">
                <h2>🟡 بلاغ عاجل بوقوع حادث مروري 🟡</h2>
                <div class="form-group">
                    <label>🔳 رقم البلاغ في رقابة +:</label>
                    <input type="text" class="form-control" id="injury-report-number">
                </div>
                <div class="form-group">
                    <label>📍معلومات الموقع:</label>
                    <input type="text" class="form-control" id="injury-location" placeholder="رابط قوقل ماب">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 اسم الطريق:</label>
                        <input type="text" class="form-control" id="injury-road-name" list="road-names-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🛣 نوع الطريق:</label>
                        <select class="form-control" id="injury-road-type">
                            <option value=""></option>
                            <option value="سريع">سريع</option>
                            <option value="مزدوج">مزدوج</option>
                            <option value="مفرد">مفرد</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 رقم الطريق:</label>
                        <input type="text" class="form-control" id="injury-road-number" list="road-numbers-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🛣 العلامة الكيلومترية:</label>
                        <div class="kilometer-sign">
                           <input type="number" class="form-control" id="injury-km" placeholder="المتر">
                            <span>+</span>
                             <input type="number" class="form-control" id="injury-meter" min="1" max="999" placeholder="الكيلو">
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 الاتجاه:</label>
                        <select class="form-control" id="injury-direction">
                            <option value="رئيسي">رئيسي</option>
                            <option value="عكسي">عكسي</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>🛣 وصف الموقع:</label>
                        <input type="text" class="form-control" id="injury-location-desc">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 رقم العقد:</label>
                        <input type="text" class="form-control" id="injury-contract-number" list="contract-numbers-list" value="404" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🛣 اسم المقاول:</label>
                        <input type="text" class="form-control" id="injury-contractor" list="contractors-list" placeholder="اكتب أو اختر">
                    </div>
                </div>
                
                <h3>🛑 نتيجة الحادث</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>⛑ عدد الإصابات:</label>
                        <input type="number" class="form-control" id="injury-injuries" min="0">
                    </div>
                    <div class="form-group">
                        <label>⛑ عدد الوفيات:</label>
                        <input type="text" class="form-control" id="injury-deaths" value="لايوجد" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label>⛑ التلفيات:</label>
                    <input type="text" class="form-control" id="injury-damages" list="damages-list" value="لايوجد" placeholder="اكتب أو اختر">
                </div>
                
                <div class="form-group">
                    <label>🚙 عدد السيارات:</label>
                    <input type="number" class="form-control" id="injury-vehicles-count" min="1" value="1" onchange="updateVehicles('injury')">
                </div>
                
                <div id="injury-vehicles-container" class="vehicles-container"></div>
                
                <div class="form-group">
                    <label>📃 سبب الحادث:</label>
                    <input type="text" class="form-control" id="injury-cause" list="causes-list" placeholder="اكتب أو اختر">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>■ الساعة:</label>
                        <input type="text" class="form-control" id="injury-time">
                    </div>
                    <div class="form-group">
                        <label>■ التاريخ:</label>
                        <input type="text" class="form-control" id="injury-date">
                    </div>
                    <div class="form-group">
                        <label>■ اليوم:</label>
                        <input type="text" class="form-control" id="injury-day">
                    </div>
                </div>
                
                <h3>🗒 معلومات عامة</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>🏁زمن تباطؤ حركة المرور:</label>
                        <input type="text" class="form-control" id="injury-traffic-delay" list="delays-list" value="لا يوجد تباطؤ" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🏞 الحالة الجوية:</label>
                        <select class="form-control" id="injury-weather">
                            <option value="صحو">صحو</option>
                            <option value="ممطرة">ممطرة</option>
                            <option value="غائم">غائم</option>
                            <option value="ضباب">ضباب</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 حالة الطريق:</label>
                        <input type="text" class="form-control" id="injury-road-condition" value="جيدة">
                    </div>
                    <div class="form-group">
                        <label>👓 وضوح الرؤية:</label>
                        <select class="form-control" id="injury-visibility">
                            <option value="واضحة">واضحة</option>
                            <option value="واضحة نسبياَ">واضحة نسبياَ</option>
                            <option value="منعدمة">منعدمة</option>
                        </select>
                    </div>
                </div>
                
                <h3>🚨 الإجراء الذي تم من قبل المقاول</h3>
                <div class="form-group">
                    <label><input type="radio" name="injury-cleaning" value="تنظيف موقع الحادث" checked> ⿢ تنظيف موقع الحادث.</label>
                    <label><input type="radio" name="injury-cleaning" value="جاري تنظيف موقع الحادث"> ⿢ جاري تنظيف موقع الحادث.</label>
                </div>
                
                <h3>🚧 المرور والسلامة بالمشروع 🚧</h3>
                
                <button class="copy-btn" onclick="copyReport('injury')"><i class="fas fa-copy"></i> نسخ وحفظ التقرير</button>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goToMainPage('accidents-system'); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
                <button class="nav-btn" onclick="goHome(); return false;"><i class="fas fa-home"></i> الرئيسية</button>
            </div>
        </div>
        
        <div id="normal-accidents-page" class="page">
            <div class="report-form normal-report">
                <h2>🔵 بلاغ عاجل بوقوع حادث مروري 🔵</h2>
                <div class="form-group">
                    <label>🔳 رقم البلاغ في رقابة +:</label>
                    <input type="text" class="form-control" id="normal-report-number">
                </div>
                <div class="form-group">
                    <label>📍معلومات الموقع:</label>
                    <input type="text" class="form-control" id="normal-location" placeholder="رابط قوقل ماب">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 اسم الطريق:</label>
                        <input type="text" class="form-control" id="normal-road-name" list="road-names-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🛣 نوع الطريق:</label>
                        <select class="form-control" id="normal-road-type">
                            <option value=""></option>
                            <option value="سريع">سريع</option>
                            <option value="مزدوج">مزدوج</option>
                            <option value="مفرد">مفرد</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 رقم الطريق:</label>
                        <input type="text" class="form-control" id="normal-road-number" list="road-numbers-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🛣 العلامة الكيلومترية:</label>
                        <div class="kilometer-sign">
                            <input type="number" class="form-control" id="normal-km" placeholder="المتر">
                            <span>+</span>
                            <input type="number" class="form-control" id="normal-meter" min="1" max="999" placeholder="الكيلو">
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 الاتجاه:</label>
                        <select class="form-control" id="normal-direction">
                            <option value="رئيسي">رئيسي</option>
                            <option value="عكسي">عكسي</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>🛣 وصف الموقع:</label>
                        <input type="text" class="form-control" id="normal-location-desc">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 رقم العقد:</label>
                        <input type="text" class="form-control" id="normal-contract-number" list="contract-numbers-list" value="404" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🛣 اسم المقاول:</label>
                        <input type="text" class="form-control" id="normal-contractor" list="contractors-list" placeholder="اكتب أو اختر">
                    </div>
                </div>
                
                <h3>🛑 نتيجة الحادث</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>⛑ عدد الإصابات:</label>
                        <input type="text" class="form-control" id="normal-injuries" value="لايوجد" readonly>
                    </div>
                    <div class="form-group">
                        <label>⛑ عدد الوفيات:</label>
                        <input type="text" class="form-control" id="normal-deaths" value="لايوجد" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label>⛑ التلفيات:</label>
                    <input type="text" class="form-control" id="normal-damages" list="damages-list" value="لايوجد" placeholder="اكتب أو اختر">
                </div>
                
                <div class="form-group">
                    <label>🚙 عدد السيارات:</label>
                    <input type="number" class="form-control" id="normal-vehicles-count" min="1" value="1" onchange="updateVehicles('normal')">
                </div>
                
                <div id="normal-vehicles-container" class="vehicles-container"></div>
                
                <div class="form-group">
                    <label>📃 سبب الحادث:</label>
                    <input type="text" class="form-control" id="normal-cause" list="causes-list" placeholder="اكتب أو اختر">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>■ الساعة:</label>
                        <input type="text" class="form-control" id="normal-time">
                    </div>
                    <div class="form-group">
                        <label>■ التاريخ:</label>
                        <input type="text" class="form-control" id="normal-date">
                    </div>
                    <div class="form-group">
                        <label>■ اليوم:</label>
                        <input type="text" class="form-control" id="normal-day">
                    </div>
                </div>
                
                <h3>🗒 معلومات عامة</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>🏁زمن تباطؤ حركة المرور:</label>
                        <input type="text" class="form-control" id="normal-traffic-delay" list="delays-list" value="لا يوجد تباطؤ" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>🏞 الحالة الجوية:</label>
                        <select class="form-control" id="normal-weather">
                            <option value="صحو">صحو</option>
                            <option value="ممطرة">ممطرة</option>
                            <option value="غائم">غائم</option>
                            <option value="ضباب">ضباب</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>🛣 حالة الطريق:</label>
                        <input type="text" class="form-control" id="normal-road-condition" value="جيدة">
                    </div>
                    <div class="form-group">
                        <label>👓 وضوح الرؤية:</label>
                        <select class="form-control" id="normal-visibility">
                            <option value="واضحة">واضحة</option>
                            <option value="واضحة نسبياَ">واضحة نسبياَ</option>
                            <option value="منعدمة">منعدمة</option>
                        </select>
                    </div>
                </div>
                
                <h3>🚨 الإجراء الذي تم من قبل المقاول</h3>
                <div class="form-group">
                    <label><input type="radio" name="normal-cleaning" value="تنظيف موقع الحادث" checked> ⿢ تنظيف موقع الحادث.</label>
                    <label><input type="radio" name="normal-cleaning" value="جاري تنظيف موقع الحادث"> ⿢ جاري تنظيف موقع الحادث.</label>
                </div>
                
                <h3>🚧 المرور والسلامة بالمشروع 🚧</h3>
                
                <button class="copy-btn" onclick="copyReport('normal')"><i class="fas fa-copy"></i> نسخ وحفظ التقرير</button>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goToMainPage('accidents-system'); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
                <button class="nav-btn" onclick="goHome(); return false;"><i class="fas fa-home"></i> الرئيسية</button>
            </div>
        </div>
    </div>


    <!-- نظام الطقس والكوارث -->
    <div id="weather-system" class="system-container">
        <header class="system-header">
            <h1>نظام التقارير الجوية والكوارث</h1>
        </header>
        <div id="weather-system-main-page" class="page" style="display:block;">
            <div class="report-types">
                <div class="report-type rain" onclick="showPage('rain-page', 'weather-system'); return false;">
                    <i class="fas fa-cloud-rain"></i>
                    <h3>تقرير حالة مطرية</h3>
                </div>
                <div class="report-type yellow" onclick="showPage('rain-followup-page', 'weather-system'); return false;">
                    <i class="fas fa-cloud-rain"></i>
                    <h3>تقرير حالة مطرية</h3>
                </div>
                <div class="report-type sandstorm" onclick="showPage('sandstorm-page', 'weather-system'); return false;">
                    <i class="fas fa-wind"></i>
                    <h3>تقرير عاصفة ترابية</h3>
                </div>
                 <div class="report-type" style="color: var(--flood-color); border-color: var(--flood-color);" onclick="showPage('water-pool-page', 'weather-system'); return false;">
                    <i class="fas fa-water"></i>
                    <h3>تجمع مياه</h3>
                </div>
                <div class="report-type" style="color: var(--flood-color); border-color: var(--flood-color);" onclick="showPage('flood-report-page', 'weather-system'); return false;">
                    <i class="fas fa-water"></i>
                    <h3>جريان سيول منقول</h3>
                </div>
                <div class="report-type" style="color: var(--flood-color); border-color: var(--flood-color);" onclick="showPage('erosion-report-page', 'weather-system'); return false;">
                    <i class="fas fa-hill-rockslide"></i>
                    <h3>انجراف ترابي</h3>
                </div>
                <div class="report-type" style="color: var(--flood-color); border-color: var(--flood-color);" onclick="showPage('rockfall-report-page', 'weather-system'); return false;">
                    <i class="fas fa-mountain"></i>
                    <h3>تساقط صخور</h3>
                </div>
                 <div class="report-type yellow" onclick="showSystem('settings-system'); return false;">
                    <i class="fas fa-cog"></i>
                    <h3>الإعدادات</h3>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goHome(); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
            </div>
        </div>
        
        <!-- صفحات نظام الطقس -->
        <div id="rain-page" class="page">
            <div class="report-form weather-report">
                <h2>🔵 (تقرير حالة مطرية) 🔵</h2>
                <div class="form-group">
                    <label>🔳رقم البلاغ في رقابة + :</label>
                    <input type="text" class="form-control" id="rain-report-number">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ اسم الطريق:</label>
                        <input type="text" class="form-control" id="rain-road-name" list="road-names-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>⬛ العقد:</label>
                        <input type="text" class="form-control" id="rain-contract-number" list="contract-numbers-list" value="404" placeholder="اكتب أو اختر">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ رقمه :</label>
                        <input type="text" class="form-control" id="rain-road-number" list="road-numbers-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>⬛ نوعه :</label>
                        <select class="form-control" id="rain-road-type">
                             <option value=""></option>
                            <option value="سريع">سريع</option>
                            <option value="مزدوج">مزدوج</option>
                            <option value="مفرد">مفرد</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>⬛ العلامة:</label>
                    <div class="form-row">
                        <div class="kilometer-sign">
                            <input type="number" class="form-control" id="rain-km1" placeholder="المتر">
                            <span>+</span>
                            <input type="number" class="form-control" id="rain-meter1" min="1" max="999" placeholder="الكيلو">
                        </div>
                        <span>إلى</span>
                        <div class="kilometer-sign">
                            <input type="number" class="form-control" id="rain-km2" placeholder="المتر">
                             <span>+</span>
                            <input type="number" class="form-control" id="rain-meter2" min="1" max="999" placeholder="الكيلو">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>🟦 وصف الموقع:</label>
                    <textarea class="form-control" id="rain-location-desc" rows="3">مواقع متفرقة</textarea>
                </div>
                <div class="form-group">
                    <label>🟦 حالة الامطار:</label>
                    <select class="form-control" id="rain-condition">
                        <option value="خفيفة">خفيفة</option>
                        <option value="متوسطة">متوسطة</option>
                        <option value="غزيرة">غزيرة</option>
                        <option value="خفيفة إلى متوسطة">خفيفة إلى متوسطة</option>
                        <option value="متوسطة إلى غزيرة">متوسطة إلى غزيرة</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>🟥 الاضرار:</label>
                    <input type="text" class="form-control" id="rain-damages" list="weather-damages-list" value="لا يوجد أضرار حتى الآن" placeholder="اكتب أو اختر">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>📆 اليوم والتاريخ:</label>
                        <input type="text" class="form-control" id="rain-date">
                    </div>
                    <div class="form-group">
                        <label>🕙 الساعة:</label>
                        <input type="text" class="form-control" id="rain-time">
                    </div>
                </div>
                
                <button class="copy-btn" onclick="copyWeatherReport('rain')"><i class="fas fa-copy"></i> نسخ وحفظ التقرير</button>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goToMainPage('weather-system'); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
                <button class="nav-btn" onclick="goHome(); return false;"><i class="fas fa-home"></i> الرئيسية</button>
            </div>
        </div>
        
        <div id="rain-followup-page" class="page">
            <div class="report-form yellow-rain-report">
                <h2>🟡 ( تقرير حالة مطرية  ) 🟡</h2>
                <div class="form-group">
                    <label>🔳رقم البلاغ في رقابة + :</label>
                    <input type="text" class="form-control" id="rain-followup-report-number">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ اسم الطريق:</label>
                        <input type="text" class="form-control" id="rain-followup-road-name" list="road-names-list" placeholder="اكتب أو اختر">
                        <p>(مستلم من الأمانة)</p>
                    </div>
                    <div class="form-group">
                        <label>⬛ العقد:</label>
                        <input type="text" class="form-control" id="rain-followup-contract-number" list="contract-numbers-list" value="404" placeholder="اكتب أو اختر">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ رقمه :</label>
                        <input type="text" class="form-control" id="rain-followup-road-number" list="road-numbers-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>⬛ نوعه :</label>
                        <select class="form-control" id="rain-followup-road-type">
                             <option value=""></option>
                            <option value="سريع">سريع</option>
                            <option value="مزدوج">مزدوج</option>
                            <option value="مفرد">مفرد</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>⬛ العلامة:</label>
                    <div class="form-row">
                        <div class="kilometer-sign">
                            <input type="number" class="form-control" id="rain-followup-km1" placeholder="المتر">
                            <span>+</span>
                            <input type="number" class="form-control" id="rain-followup-meter1" min="1" max="999" placeholder="الكيلو">
                        </div>
                        <span>إلى</span>
                        <div class="kilometer-sign">
                            <input type="number" class="form-control" id="rain-followup-km2" placeholder="المتر">
                             <span>+</span>
                            <input type="number" class="form-control" id="rain-followup-meter2" min="1" max="999" placeholder="الكيلو">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>🟦 وصف الموقع:</label>
                    <textarea class="form-control" id="rain-followup-location-desc" rows="3">مواقع متفرقة</textarea>
                </div>
                <div class="form-group">
                    <label>🟦 حالة الامطار:</label>
                    <select class="form-control" id="rain-followup-condition">
                        <option value="خفيفة">خفيفة</option>
                        <option value="متوسطة">متوسطة</option>
                        <option value="غزيرة">غزيرة</option>
                        <option value="خفيفة إلى متوسطة">خفيفة إلى متوسطة</option>
                        <option value="متوسطة إلى غزيرة">متوسطة إلى غزيرة</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>🟥 الاضرار:</label>
                    <input type="text" class="form-control" id="rain-followup-damages" list="weather-damages-list" value="لا يوجد أضرار حتى الآن" placeholder="اكتب أو اختر">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>📆 اليوم والتاريخ:</label>
                        <input type="text" class="form-control" id="rain-followup-date">
                    </div>
                    <div class="form-group">
                        <label>🕙 الساعة:</label>
                        <input type="text" class="form-control" id="rain-followup-time">
                    </div>
                </div>
                
                <button class="copy-btn" onclick="copyWeatherReport('rain-followup')"><i class="fas fa-copy"></i> نسخ وحفظ التقرير</button>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goToMainPage('weather-system'); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
                <button class="nav-btn" onclick="goHome(); return false;"><i class="fas fa-home"></i> الرئيسية</button>
            </div>
        </div>
        
        <div id="sandstorm-page" class="page">
             <div class="report-form sandstorm-report">
                <h2>🟠 ( تقرير عاصفة ترابية ) 🟠</h2>
                <div class="form-group">
                    <label>🔳رقم البلاغ في رقابة + :</label>
                    <input type="text" class="form-control" id="sandstorm-report-number">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ اسم الطريق:</label>
                        <input type="text" class="form-control" id="sandstorm-road-name" list="road-names-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>⬛ العقد:</label>
                        <input type="text" class="form-control" id="sandstorm-contract-number" list="contract-numbers-list" value="404" placeholder="اكتب أو اختر">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ رقمه :</label>
                        <input type="text" class="form-control" id="sandstorm-road-number" list="road-numbers-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>⬛ نوعه :</label>
                        <select class="form-control" id="sandstorm-road-type">
                             <option value=""></option>
                            <option value="سريع">سريع</option>
                            <option value="مزدوج">مزدوج</option>
                            <option value="مفرد">مفرد</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>⬛ العلامة:</label>
                    <div class="form-row">
                        <div class="kilometer-sign">
                            <input type="number" class="form-control" id="sandstorm-km1" placeholder="المتر">
                            <span>+</span>
                            <input type="number" class="form-control" id="sandstorm-meter1" min="1" max="999" placeholder="الكيلو">
                        </div>
                        <span>إلى</span>
                        <div class="kilometer-sign">
                            <input type="number" class="form-control" id="sandstorm-km2" placeholder="المتر">
                            <span>+</span>
                            <input type="number" class="form-control" id="sandstorm-meter2" min="1" max="999" placeholder="الكيلو">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>🟦 وصف الموقع:</label>
                    <textarea class="form-control" id="sandstorm-location-desc" rows="3">مواقع متفرقة</textarea>
                </div>
                <div class="form-group">
                    <label>🟦 حالة العاصفة:</label>
                    <textarea class="form-control" id="sandstorm-condition" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>🟥 الاضرار:</label>
                    <input type="text" class="form-control" id="sandstorm-damages" list="weather-damages-list" value="لا يوجد أضرار حتى الآن" placeholder="اكتب أو اختر">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>📆 اليوم والتاريخ:</label>
                        <input type="text" class="form-control" id="sandstorm-date">
                    </div>
                    <div class="form-group">
                        <label>🕙 الساعة:</label>
                        <input type="text" class="form-control" id="sandstorm-time">
                    </div>
                </div>
                
                <button class="copy-btn" onclick="copyWeatherReport('sandstorm')"><i class="fas fa-copy"></i> نسخ وحفظ التقرير</button>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goToMainPage('weather-system'); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
                <button class="nav-btn" onclick="goHome(); return false;"><i class="fas fa-home"></i> الرئيسية</button>
            </div>
        </div>
        
        <div id="water-pool-page" class="page">
             <div class="report-form weather-red-report">
                <h2>🔴 ( تقرير تجمع مياه ) 🔴</h2>
                <div class="form-group">
                    <label>🔳رقم البلاغ في رقابة + :</label>
                    <input type="text" class="form-control" id="waterpool-report-number">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ اسم الطريق:</label>
                        <input type="text" class="form-control" id="waterpool-road-name" list="road-names-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>⬛ العقد:</label>
                        <input type="text" class="form-control" id="waterpool-contract-number" list="contract-numbers-list" value="404" placeholder="اكتب أو اختر">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ رقمه :</label>
                        <input type="text" class="form-control" id="waterpool-road-number" list="road-numbers-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>⬛ نوعه :</label>
                        <select class="form-control" id="waterpool-road-type">
                             <option value=""></option>
                            <option value="سريع">سريع</option>
                            <option value="مزدوج">مزدوج</option>
                            <option value="مفرد">مفرد</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>⬛ العلامة:</label>
                     <div class="kilometer-sign">
                        <input type="number" class="form-control" id="waterpool-km1" placeholder="المتر">
                        <span>+</span>
                        <input type="number" class="form-control" id="waterpool-meter1" min="1" max="999" placeholder="الكيلو">
                    </div>
                </div>
                <div class="form-group">
                    <label>🟦 الموقع:</label>
                    <input type="text" class="form-control" id="waterpool-location" placeholder="رابط قوقل ماب">
                </div>
                <div class="form-group">
                    <label>🟦 وصف الموقع:</label>
                    <textarea class="form-control" id="waterpool-location-desc" rows="3">مواقع متفرقة</textarea>
                </div>
                <div class="form-group">
                    <label>🟦 منسوب التجمع:</label>
                    <input type="text" class="form-control" id="waterpool-level">
                </div>
                <div class="form-group">
                    <label>🟥 الاضرار:</label>
                    <input type="text" class="form-control" id="waterpool-damages" list="weather-damages-list" value="لا يوجد أضرار حتى الآن" placeholder="اكتب أو اختر">
                </div>
                <div class="form-group">
                    <label>🚘حركة المركبات:</label>
                    <select class="form-control" id="waterpool-traffic">
                        <option value=" سالكة">سالكة</option>
                        <option value="لا يمكن العبور">لا يمكن العبور</option>
                        <option value=" سالكة ببطء">سالكة ببطء</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>📆 اليوم والتاريخ:</label>
                        <input type="text" class="form-control" id="waterpool-date">
                    </div>
                    <div class="form-group">
                        <label>🕙 الساعة:</label>
                        <input type="text" class="form-control" id="waterpool-time">
                    </div>
                </div>
                
                <button class="copy-btn" onclick="copyWeatherReport('waterpool')"><i class="fas fa-copy"></i> نسخ وحفظ التقرير</button>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goToMainPage('weather-system'); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
                <button class="nav-btn" onclick="goHome(); return false;"><i class="fas fa-home"></i> الرئيسية</button>
            </div>
        </div>
        
        <div id="flood-report-page" class="page">
            <div class="report-form weather-red-report">
                <h2>🔴 ( تقرير جريان سيول منقول ) 🔴</h2>
                <div class="form-group">
                    <label>🔳رقم البلاغ في رقابة + :</label>
                    <input type="text" class="form-control" id="flood-report-number">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ اسم الطريق:</label>
                        <input type="text" class="form-control" id="flood-road-name" list="road-names-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>⬛ العقد:</label>
                        <input type="text" class="form-control" id="flood-contract-number" list="contract-numbers-list" value="404" placeholder="اكتب أو اختر">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ رقمه :</label>
                        <input type="text" class="form-control" id="flood-road-number" list="road-numbers-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>⬛ نوعه :</label>
                        <select class="form-control" id="flood-road-type">
                             <option value=""></option>
                            <option value="سريع">سريع</option>
                            <option value="مزدوج">مزدوج</option>
                            <option value="مفرد">مفرد</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>⬛ العلامة:</label>
                    <div class="kilometer-sign">
                        <input type="number" class="form-control" id="flood-km1" placeholder="المتر">
                        <span>+</span>
                        <input type="number" class="form-control" id="flood-meter1" min="1" max="999" placeholder="الكيلو">
                    </div>
                </div>
                <div class="form-group">
                    <label>🟦 الموقع:</label>
                    <input type="text" class="form-control" id="flood-location" placeholder="رابط قوقل ماب">
                </div>
                <div class="form-group">
                    <label>🟦 وصف الموقع:</label>
                    <textarea class="form-control" id="flood-location-desc" rows="3">مواقع متفرقة</textarea>
                </div>
                <div class="form-group">
                    <label>🟦 شدة السيول:</label>
                    <input type="text" class="form-control" id="flood-intensity" value="عبور مياه على سطح الطريق بإرتفاع  سم">
                </div>
                <div class="form-group">
                    <label>🟥 الاضرار:</label>
                    <input type="text" class="form-control" id="flood-damages" list="weather-damages-list" value="لا يوجد أضرار حتى الآن" placeholder="اكتب أو اختر">
                </div>
                <div class="form-group">
                    <label>🚘 حركة المركبات:</label>
                    <select class="form-control" id="flood-traffic">
                        <option value=" سالكة">سالكة</option>
                        <option value=" لا يمكن العبور">لا يمكن العبور</option>
                        <option value=" سالكة ببطء">سالكة ببطء</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>📆 اليوم والتاريخ:</label>
                        <input type="text" class="form-control" id="flood-date">
                    </div>
                    <div class="form-group">
                        <label>🕙 الساعة:</label>
                        <input type="text" class="form-control" id="flood-time">
                    </div>
                </div>
                
                <button class="copy-btn" onclick="copyWeatherReport('flood')"><i class="fas fa-copy"></i> نسخ وحفظ التقرير</button>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goToMainPage('weather-system'); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
                <button class="nav-btn" onclick="goHome(); return false;"><i class="fas fa-home"></i> الرئيسية</button>
            </div>
        </div>
        
        <div id="erosion-report-page" class="page">
            <div class="report-form weather-red-report">
                <h2>🔴 ( تقرير انجراف ترابي ) 🔴</h2>
                <div class="form-group">
                    <label>🔳رقم البلاغ في رقابة + :</label>
                    <input type="text" class="form-control" id="erosion-report-number">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ اسم الطريق:</label>
                        <input type="text" class="form-control" id="erosion-road-name" list="road-names-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>⬛ العقد:</label>
                        <input type="text" class="form-control" id="erosion-contract-number" list="contract-numbers-list" value="404" placeholder="اكتب أو اختر">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ رقمه :</label>
                        <input type="text" class="form-control" id="erosion-road-number" list="road-numbers-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>⬛ نوعه :</label>
                        <select class="form-control" id="erosion-road-type">
                             <option value=""></option>
                            <option value="سريع">سريع</option>
                            <option value="مزدوج">مزدوج</option>
                            <option value="مفرد">مفرد</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>⬛ العلامة:</label>
                    <div class="kilometer-sign">
                        <input type="number" class="form-control" id="erosion-km1" placeholder="المتر">
                        <span>+</span>
                        <input type="number" class="form-control" id="erosion-meter1" min="1" max="999" placeholder="الكيلو">
                    </div>
                </div>
                <div class="form-group">
                    <label>🟦 الموقع:</label>
                    <input type="text" class="form-control" id="erosion-location" placeholder="رابط قوقل ماب">
                </div>
                 <div class="form-group">
                    <label>🟦 وصف الموقع:</label>
                    <textarea class="form-control" id="erosion-location-desc" rows="3">مواقع متفرقة</textarea>
                </div>
                <div class="form-group">
                    <label>🟥 الاضرار:</label>
                    <input type="text" class="form-control" id="erosion-damages" list="weather-damages-list" value="لا يوجد أضرار حتى الآن" placeholder="اكتب أو اختر">
                </div>
                <div class="form-group">
                    <label>🚘 حركة المركبات:</label>
                    <select class="form-control" id="erosion-traffic">
                        <option value=" سالكة">سالكة</option>
                        <option value=" لا يمكن العبور">لا يمكن العبور</option>
                        <option value=" سالكة ببطء">سالكة ببطء</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>📆 اليوم والتاريخ:</label>
                        <input type="text" class="form-control" id="erosion-date">
                    </div>
                    <div class="form-group">
                        <label>🕙 الساعة:</label>
                        <input type="text" class="form-control" id="erosion-time">
                    </div>
                </div>
                
                <button class="copy-btn" onclick="copyWeatherReport('erosion')"><i class="fas fa-copy"></i> نسخ وحفظ التقرير</button>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goToMainPage('weather-system'); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
                <button class="nav-btn" onclick="goHome(); return false;"><i class="fas fa-home"></i> الرئيسية</button>
            </div>
        </div>
        
        <div id="rockfall-report-page" class="page">
            <div class="report-form weather-red-report">
                <h2>🔴 ( تقرير تساقط صخور ) 🔴</h2>
                <div class="form-group">
                    <label>🔳رقم البلاغ في رقابة + :</label>
                    <input type="text" class="form-control" id="rockfall-report-number">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ اسم الطريق:</label>
                        <input type="text" class="form-control" id="rockfall-road-name" list="road-names-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>⬛ العقد:</label>
                        <input type="text" class="form-control" id="rockfall-contract-number" list="contract-numbers-list" value="404" placeholder="اكتب أو اختر">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>⬛ رقمه :</label>
                        <input type="text" class="form-control" id="rockfall-road-number" list="road-numbers-list" placeholder="اكتب أو اختر">
                    </div>
                    <div class="form-group">
                        <label>⬛ نوعه :</label>
                        <select class="form-control" id="rockfall-road-type">
                             <option value=""></option>
                            <option value="سريع">سريع</option>
                            <option value="مزدوج">مزدوج</option>
                            <option value="مفرد">مفرد</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>⬛ العلامة:</label>
                    <div class="kilometer-sign">
                        <input type="number" class="form-control" id="rockfall-km1" placeholder="المتر">
                        <span>+</span>
                        <input type="number" class="form-control" id="rockfall-meter1" min="1" max="999" placeholder="الكيلو">
                    </div>
                </div>
                <div class="form-group">
                    <label>🟦 الموقع:</label>
                    <input type="text" class="form-control" id="rockfall-location" placeholder="رابط قوقل ماب">
                </div>
                <div class="form-group">
                    <label>🟦 وصف الموقع:</label>
                    <textarea class="form-control" id="rockfall-location-desc" rows="3">مواقع متفرقة</textarea>
                </div>
                 <div class="form-group">
                    <label>🚘 حركة المركبات:</label>
                    <select class="form-control" id="rockfall-traffic">
                        <option value=" سالكة">سالكة</option>
                        <option value=" لا يمكن العبور">لا يمكن العبور</option>
                        <option value=" سالكة ببطء">سالكة ببطء</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>🟥 الاضرار:</label>
                    <input type="text" class="form-control" id="rockfall-damages" list="weather-damages-list" value="لا يوجد أضرار حتى الآن" placeholder="اكتب أو اختر">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>📆 اليوم والتاريخ:</label>
                        <input type="text" class="form-control" id="rockfall-date">
                    </div>
                    <div class="form-group">
                        <label>🕙 الساعة:</label>
                        <input type="text" class="form-control" id="rockfall-time">
                    </div>
                </div>
                
                <button class="copy-btn" onclick="copyWeatherReport('rockfall')"><i class="fas fa-copy"></i> نسخ وحفظ التقرير</button>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goToMainPage('weather-system'); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
                <button class="nav-btn" onclick="goHome(); return false;"><i class="fas fa-home"></i> الرئيسية</button>
            </div>
        </div>
    </div>


    <!-- نظام الخرائط التفاعلية -->
    <div id="maps-system" class="system-container">
        <header class="system-header">
            <h1>نظام الخرائط التفاعلية</h1>
        </header>
        <div id="maps-system-main-page" class="page" style="display:block;">
            <div class="empty-page">
                <i class="fas fa-globe-asia"></i>
                <h2>نظام الخرائط التفاعلية</h2>
                <p>هذا النظام يوفر خرائط تفاعلية دقيقة للمشاريع والبنية التحتية. (قيد التطوير)</p>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goHome(); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
            </div>
        </div>
    </div>


    <!-- نظام التقارير الأسبوعية -->
    <div id="reports-system" class="system-container">
        <header class="system-header">
            <h1>نظام التقارير الأسبوعية والإحصائيات</h1>
        </header>
        <div id="reports-system-main-page" class="page" style="display:block;">
            <div class="report-form" style="padding: 20px;">
                <h2>إنشاء تقرير إحصائي من البلاغات المحفوظة</h2>
                <p>حدد فترة زمنية لعرض ملخص لجميع البلاغات المسجلة.</p>
                <div class="form-row">
                    <div class="form-group">
                        <label for="report-start-date">من تاريخ:</label>
                        <input type="date" id="report-start-date" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="report-end-date">إلى تاريخ:</label>
                        <input type="date" id="report-end-date" class="form-control">
                    </div>
                </div>
                <div class="nav-buttons" style="margin-top: 20px; justify-content: center;">
                     <button class="nav-btn" onclick="generateReport()" style="flex: 0.5;"><i class="fas fa-cogs"></i> إنشاء التقرير</button>
                     <button class="nav-btn" onclick="printReport()" id="print-report-btn" style="display: none; flex: 0.5; background-color: var(--secondary-color);"><i class="fas fa-print"></i> طباعة التقرير</button>
                </div>
                <div id="report-output" class="data-list" style="margin-top: 20px; max-height: none; display: none;">
                    <!-- Report content will be injected here -->
                </div>
            </div>
            
            <hr style="margin: 40px 0; border: 1px solid #eee;">

            <!-- START: Merged Weekly Accident Statistics -->
            <div class="weekly-stats-container">
                <h2>حاسبة إحصائية للحوادث الأسبوعية</h2>
                
                <div class="stats-counter">
                    <label for="stats-accidents">عدد الحوادث:</label>
                    <button id="stats-accidents-minus">-</button>
                    <input type="number" id="stats-accidents" value="0" min="0">
                    <button id="stats-accidents-plus">+</button>
                    <div class="total">المجموع: <span id="stats-accidents-total">0</span></div>
                </div>
                
                <div class="stats-counter">
                    <label for="stats-injuries">عدد الإصابات:</label>
                    <button id="stats-injuries-minus">-</button>
                    <input type="number" id="stats-injuries" value="0" min="0">
                    <button id="stats-injuries-plus">+</button>
                    <div class="total">المجموع: <span id="stats-injuries-total">0</span></div>
                </div>
                
                <div class="stats-counter">
                    <label for="stats-damages">عدد التلفيات:</label>
                    <button id="stats-damages-minus">-</button>
                    <input type="number" id="stats-damages" value="0" min="0">
                    <button id="stats-damages-plus">+</button>
                    <div class="total">المجموع: <span id="stats-damages-total">0</span></div>
                </div>
                
                <div class="stats-counter">
                    <label for="stats-fatalities">عدد الوفيات:</label>
                    <button id="stats-fatalities-minus">-</button>
                    <input type="number" id="stats-fatalities" value="0" min="0">
                    <button id="stats-fatalities-plus">+</button>
                    <div class="total">المجموع: <span id="stats-fatalities-total">0</span></div>
                </div>
                
                <div class="stats-date-controls">
                    <div>
                        <label for="stats-start-day">من يوم:</label>
                        <input type="number" id="stats-start-day" min="1" max="31">
                        <label for="stats-start-month">شهر:</label>
                        <input type="number" id="stats-start-month" min="1" max="12">
                        <label for="stats-start-year">سنة:</label>
                        <input type="number" id="stats-start-year" min="2000" max="2100">
                    </div>
                    <div>
                        <label for="stats-end-day">إلى يوم:</label>
                        <input type="number" id="stats-end-day" min="1" max="31">
                        <label for="stats-end-month">شهر:</label>
                        <input type="number" id="stats-end-month" min="1" max="12">
                        <label for="stats-end-year">سنة:</label>
                        <input type="number" id="stats-end-year" min="2000" max="2100">
                    </div>
                </div>
                
                <div class="stats-report" id="weekly-stats-report-output">
                </div>
                
                <div class="stats-buttons">
                    <button id="stats-update-report">تحديث التقرير</button>
                    <button id="stats-copy-whatsapp" class="copy">نسخ التقرير</button>
                </div>
            </div>
            <!-- END: Merged Weekly Accident Statistics -->

            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goHome(); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
            </div>
        </div>
    </div>


    <!-- نظام الذكاء الاصطناعي -->
    <div id="ai-system" class="system-container">
        <header class="system-header">
            <h1>نظام الذكاء الاصطناعي</h1>
        </header>
        <div id="ai-system-main-page" class="page" style="display:block;">
            <div class="empty-page">
                <i class="fas fa-robot"></i>
                <h2>نظام الذكاء الاصطناعي</h2>
                <p>هذا النظام يوفر تحليلات وتنبؤات باستخدام الذكاء الاصطناعي. (قيد التطوير)</p>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goHome(); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
            </div>
        </div>
    </div>


    <!-- نظام الإعدادات -->
    <div id="settings-system" class="system-container">
        <header class="system-header">
            <h1><i class="fas fa-cog"></i> نظام الإعدادات</h1>
        </header>
        <div id="settings-system-main-page" class="page" style="display:block;">
            <div class="settings-form">
                
                <div class="settings-section">
                    <h3><i class="fas fa-road"></i> إدارة الطرق</h3>
                    
                    <div class="excel-upload-container">
                        <p>ارفع ملف إكسل لإضافة بيانات الطرق دفعة واحدة</p>
                        <input type="file" id="excel-file" accept=".xlsx, .xls, .csv" style="display: none;">
                        <button class="upload-btn" onclick="document.getElementById('excel-file').click()">
                            <i class="fas fa-file-arrow-up"></i> اختر ملف إكسل
                        </button>
                        <div id="file-name" class="file-name"></div>
                        <div class="instructions">
                            <h4>تعليمات تنسيق الملف:</h4>
                            <ul>
                                <li>الأعمدة المطلوبة: <code>رقم العقد</code>, <code>رقم الطريق</code>, <code>اسم الطريق</code>, <code>نوع الطريق</code>, <code>اسم المقاول</code>.</li>
                            </ul>
                        </div>
                    </div>

                    <h4 style="margin-top: 30px;">إضافة طريق يدوياً</h4>
                    <div class="form-group">
                        <label for="new-contract-number">رقم العقد:</label>
                        <input type="text" id="new-contract-number" class="form-control" placeholder="مثال: 404">
                    </div>
                     <div class="form-group">
                        <label for="new-contractor-name">اسم المقاول:</label>
                        <input type="text" id="new-contractor-name" class="form-control" placeholder="مثال: مطلق الغويري للمقاولات">
                    </div>
                    <div class="form-group">
                        <label for="new-road-number">رقم الطريق:</label>
                        <input type="text" id="new-road-number" class="form-control" placeholder="مثال: 15">
                    </div>
                    <div class="form-group">
                        <label for="new-road-name">اسم الطريق:</label>
                        <input type="text" id="new-road-name" class="form-control" placeholder="مثال: مكة المكرمة / المدينة المنورة">
                    </div>
                    <div class="form-group">
                        <label for="new-road-type-setting">نوع الطريق:</label>
                        <select id="new-road-type-setting" class="form-control">
                            <option value="مفرد">مفرد</option>
                            <option value="مزدوج">مزدوج</option>
                            <option value="سريع" selected>سريع</option>
                        </select>
                    </div>
                    <button class="save-btn" onclick="addRoadData()">➕ إضافة طريق</button>
                    
                    <h4 style="margin-top: 30px;">قائمة الطرق المحفوظة</h4>
                    <div class="data-list" id="roads-list"></div>
                    <button class="nav-btn back-btn" style="margin-top: 10px;" onclick="deleteSimpleData('roads')">🗑 حذف المحدد</button>
                </div>

                <div class="settings-section">
                    <h3><i class="fas fa-hard-hat"></i> إدارة المقاولين</h3>
                    <div class="form-group">
                        <label for="contractor-name-input">اسم المقاول:</label>
                        <input type="text" id="contractor-name-input" class="form-control">
                    </div>
                    <button class="save-btn" onclick="addSimpleData('contractors', 'contractor-name-input')">إضافة مقاول</button>
                    <div class="data-list" id="contractors-list-settings"></div>
                     <button class="nav-btn back-btn" style="margin-top: 10px;" onclick="deleteSimpleData('contractors')">🗑 حذف المحدد</button>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-car"></i> إدارة أنواع المركبات</h3>
                    <div class="form-group">
                        <label for="vehicle-type-input">نوع المركبة:</label>
                        <input type="text" id="vehicle-type-input" class="form-control">
                    </div>
                    <button class="save-btn" onclick="addSimpleData('vehicleTypes', 'vehicle-type-input')">إضافة مركبة</button>
                    <div class="data-list" id="vehicles-list-settings"></div>
                     <button class="nav-btn back-btn" style="margin-top: 10px;" onclick="deleteSimpleData('vehicleTypes')">🗑 حذف المحدد</button>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-file-alt"></i> إدارة أسباب الحوادث</h3>
                    <div class="form-group">
                        <label for="accident-cause-input">سبب الحادث:</label>
                        <input type="text" id="accident-cause-input" class="form-control">
                    </div>
                    <button class="save-btn" onclick="addSimpleData('accidentCauses', 'accident-cause-input')">إضافة سبب</button>
                    <div class="data-list" id="causes-list-settings"></div>
                     <button class="nav-btn back-btn" style="margin-top: 10px;" onclick="deleteSimpleData('accidentCauses')">🗑 حذف المحدد</button>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-tools"></i> إدارة التلفيات (حوادث)</h3>
                    <div class="form-group">
                        <label for="damage-type-input">نوع التلف:</label>
                        <input type="text" id="damage-type-input" class="form-control">
                    </div>
                    <button class="save-btn" onclick="addSimpleData('damageTypes', 'damage-type-input')">إضافة تلف</button>
                    <div class="data-list" id="damages-list-settings"></div>
                     <button class="nav-btn back-btn" style="margin-top: 10px;" onclick="deleteSimpleData('damageTypes')">🗑 حذف المحدد</button>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-traffic-light"></i> إدارة التباطؤ المروري</h3>
                    <div class="form-group">
                        <label for="delay-type-input">نوع التباطؤ:</label>
                        <input type="text" id="delay-type-input" class="form-control">
                    </div>
                    <button class="save-btn" onclick="addSimpleData('delayTypes', 'delay-type-input')">إضافة تباطؤ</button>
                    <div class="data-list" id="delays-list-settings"></div>
                     <button class="nav-btn back-btn" style="margin-top: 10px;" onclick="deleteSimpleData('delayTypes')">🗑 حذف المحدد</button>
                </div>

                <div class="settings-section">
                    <h3><i class="fas fa-cloud"></i> إدارة الحالات الجوية</h3>
                    <div class="form-group">
                        <label for="weather-condition-input">الحالة الجوية:</label>
                        <input type="text" id="weather-condition-input" class="form-control">
                    </div>
                    <button class="save-btn" onclick="addSimpleData('weatherConditions', 'weather-condition-input')">إضافة حالة</button>
                    <div class="data-list" id="weather-conditions-list-settings"></div>
                     <button class="nav-btn back-btn" style="margin-top: 10px;" onclick="deleteSimpleData('weatherConditions')">🗑 حذف المحدد</button>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-house-damage"></i> إدارة الأضرار (طقس)</h3>
                    <div class="form-group">
                        <label for="weather-damage-input">نوع الضرر:</label>
                        <input type="text" id="weather-damage-input" class="form-control">
                    </div>
                    <button class="save-btn" onclick="addSimpleData('weatherDamages', 'weather-damage-input')">إضافة ضرر</button>
                    <div class="data-list" id="weather-damages-list-settings"></div>
                     <button class="nav-btn back-btn" style="margin-top: 10px;" onclick="deleteSimpleData('weatherDamages')">🗑 حذف المحدد</button>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn back-btn" onclick="goHome(); return false;"><i class="fas fa-arrow-right"></i> رجوع للخلف</button>
            </div>
        </div>
    </div>


    <!-- Toast Notification Element -->
    <div id="toast-notification" class="toast">
        <div id="toast-message"></div>
    </div>


    <!-- Custom Modal Elements -->
    <div id="custom-modal" class="modal-overlay">
        <div class="modal-dialog">
            <h3 id="modal-title"></h3>
            <p id="modal-text"></p>
            <div id="modal-prompt-content" style="display: none;">
                <div class="form-group">
                    <input type="text" id="modal-input" class="form-control">
                </div>
            </div>
            <div class="modal-buttons">
                <button id="modal-cancel-btn" class="modal-btn cancel">إلغاء</button>
                <button id="modal-confirm-btn" class="modal-btn confirm">تأكيد</button>
            </div>
        </div>
    </div>


    <!-- Datalists for autocompletion -->
    <datalist id="road-names-list"></datalist>
    <datalist id="road-numbers-list"></datalist>
    <datalist id="contract-numbers-list"></datalist>
    <datalist id="contractors-list"></datalist>
    <datalist id="vehicle-types-list"></datalist>
    <datalist id="causes-list"></datalist>
    <datalist id="damages-list"></datalist>
    <datalist id="delays-list"></datalist>
    <datalist id="weather-conditions-list"></datalist>
    <datalist id="weather-damages-list"></datalist>


    <script>
        // --- Navigation Functions ---
        function showSystem(systemId) {
            document.getElementById('main-container').style.display = 'none';
            document.querySelectorAll('.system-container').forEach(system => {
                system.style.display = 'none';
            });
            const system = document.getElementById(systemId);
            system.style.display = 'block';
            goToMainPage(systemId);
        }
        
        function showPage(pageId, systemId) {
            const system = document.getElementById(systemId);
            system.querySelectorAll('.page').forEach(page => {
                page.style.display = 'none';
            });
            document.getElementById(pageId).style.display = 'block';
        }
        
        function goToMainPage(systemId) {
            const system = document.getElementById(systemId);
            system.querySelectorAll('.page').forEach(page => {
                page.style.display = 'none';
            });
            const mainPageId = systemId + '-main-page';
            document.getElementById(mainPageId).style.display = 'block';
        }
        
        function goHome() {
            document.querySelectorAll('.system-container').forEach(system => {
                system.style.display = 'none';
            });
            document.getElementById('main-container').style.display = 'block';
        }


        // --- Utility Functions ---
        function updateDateTime() {
            const now = new Date();
            // Use ar-SA locale for 12h format with AM/PM
            const timeString = now.toLocaleTimeString('ar-SA', { hour: 'numeric', minute: 'numeric', hour12: true });
            
            // Manual date formatting for YYYY/MM/DD
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const accidentDate = `${year}/${month}/${day}`; // YYYY/MM/DD format

            const accidentDay = now.toLocaleDateString('ar-EG', { weekday: 'long' });
            
            // Hijri date with corrected format
            const hijriDateString = now.toLocaleDateString('ar-SA-u-nu-arab', { 
                day: 'numeric', 
                month: 'long', 
                year: 'numeric', 
                calendar: 'islamic'
            });
            const hijriDayString = now.toLocaleDateString('ar-SA-u-nu-arab', { 
                weekday: 'long', 
                calendar: 'islamic'
            });
            const formattedHijriDate = `${hijriDayString}، ${hijriDateString}`;

            // Set for accident system
            document.querySelectorAll('#accidents-system [id$="-date"]').forEach(el => el.value = accidentDate);
            document.querySelectorAll('#accidents-system [id$="-day"]').forEach(el => el.value = accidentDay);
            document.querySelectorAll('#accidents-system [id$="-time"]').forEach(el => el.value = timeString);
            
            // Set for weather system
            document.querySelectorAll('#weather-system [id$="-date"]').forEach(el => el.value = formattedHijriDate);
            document.querySelectorAll('#weather-system [id$="-time"]').forEach(el => el.value = timeString);
        }


        function showToast(message) {
            const toast = document.getElementById('toast-notification');
            const toastMessage = document.getElementById('toast-message');
            
            toastMessage.textContent = message;
            toast.className = "toast show";
            
            setTimeout(function(){ 
                toast.className = toast.className.replace("show", ""); 
            }, 4000);
        }


        // --- Data Management & UI Update ---
        const dataKeys = ['roads', 'contractors', 'vehicleTypes', 'accidentCauses', 'damageTypes', 'delayTypes', 'weatherConditions', 'weatherDamages'];
        let appData = {};

        function loadAllData() {
            dataKeys.forEach(key => {
                try {
                    const storedData = localStorage.getItem(key);
                    appData[key] = storedData ? JSON.parse(storedData) : [];
                } catch (e) {
                    console.error(`Failed to parse data for key: ${key}`, e);
                    appData[key] = [];
                }
            });
            
            // Set default values if empty
            if (appData.roads.length === 0) {
                appData.roads = [
                    { contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '15', roadName: 'مكة المكرمة / المدينة المنورة', roadType: 'سريع' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '15', roadName: 'المدينة المنورة / تبوك المزدوج', roadType: 'مزدوج' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '380', roadName: 'المدينة المنورة / العلا / تبوك السريع', roadType: 'سريع' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '4377', roadName: 'طريق حجر / المواريد', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8028', roadName: 'الجفر / المدينة (ضبوعة)', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8100', roadName: 'طريق تبوك القديم', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8110', roadName: 'طريق الخليل / البيضاء', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8251', roadName: 'طريق وادي الفرع / أبو الضباع / الأبواء', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8265', roadName: 'اليتمة - ملحة -خلص 1', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8280', roadName: 'طريق الحمنة', roadType: 'مزدوج' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8380', roadName: 'طريق الأكحل', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8389', roadName: 'طريق زراعي باليتمة1', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8396', roadName: 'طريق زراعي باليتمة 3', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8397', roadName: 'طريق اليتمة / الضميرية', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8400', roadName: 'طريق زراعي باليتمة2', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8402', roadName: 'طريق زراعي بأبيار الماشي رقم 2', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8410', roadName: 'طريق زراعي بأبيار الماشي رقم1', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8428', roadName: 'وصلة أبيار الماشي', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8435', roadName: 'طريق زراعي بالخليل 1', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8436', roadName: 'طريق زراعي بالخليل 2', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8444', roadName: 'طريق منتزه البيضاء البري', roadType: 'مزدوج' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8453', roadName: 'طريق حنذ', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8463', roadName: 'عشيرة', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8468', roadName: 'انبوان', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8501', roadName: 'الحليقة', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8540', roadName: 'الغصن', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8541', roadName: 'الحنو', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8543', roadName: 'طريق سد الغابة 1', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8544', roadName: 'طريق سد الغابة 2', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8545', roadName: 'طريق سد الغابة 3', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8546', roadName: 'طريق سد الغابة 4', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8587', roadName: 'طريق زراعي بالخليل 3', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8589', roadName: 'وصلة بمنتزه البيضاء البري', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8594', roadName: 'أبو زباير /أم هشيم', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8595', roadName: 'عين طوالة', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8744', roadName: 'الحرجة', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '8745', roadName: 'لحج / المعمار', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90410', roadName: 'الضميرية / الحجرية', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90411', roadName: 'طريق رابط طريق الضميرية الحجرية بطريق سهلة المزرع', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90412', roadName: 'طريق الصعبية ـــ العد - سهلة المزرع', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90428', roadName: 'طريق زراعي بأبيار الماشي رقم (7)', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90429', roadName: 'طريق زراعي بأبيار الماشي رقم (3)', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90431', roadName: 'طريق زراعي بأبيار الماشي رقم (5)', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90434', roadName: 'طريق زراعي بأبيار الماشي رقم (4)', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90436', roadName: 'طريق زراعي بأبيار الماشي رقم (6)', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90437', roadName: 'وصلة زراعية بالعشيرة', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90438', roadName: 'العشيرة / الفراشة', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90439', roadName: 'طريق وادي ريم', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90440', roadName: 'ينبع السريع / وادي ريم', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90445', roadName: 'اليتمة - ملحة -خلص 2', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90446', roadName: 'متفرع من فراشة الشامي', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90447', roadName: 'طريق وادي النقيع', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90448', roadName: 'السدر', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90449', roadName: 'طريق السدر - الاكحل', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90465', roadName: 'المسيجيد / القاحة / أم البرك', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90468', roadName: 'طريق وادي الفرع - المجرمة', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90469', roadName: 'الفقير- الفراش', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90470', roadName: 'الفقير - الرمضة', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90471', roadName: 'الجويذيعية (حي جبير)', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90472', roadName: 'وصلة متفرعة من السيح', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90473', roadName: 'السيح-الشفية - السدر', roadType: 'مزدوج' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90474', roadName: 'السيح-الشفية - السدر', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90475', roadName: 'الشفية / العطشان / الفقير', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90477', roadName: 'وصلة زراعية بالهندية', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90478', roadName: 'اليتمة -الهندية', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90563', roadName: 'المطاوي / الخيال', roadType: 'مزدوج' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90563', roadName: 'الصلصلة / العقيلة', roadType: 'مزدوج' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90565', roadName: 'أم هشيم', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '90574', roadName: 'وصلة أبو الدود', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '91275', roadName: 'وصلة 1 متفرعة الراغبة/حضة/ريم/الشلايل', roadType: 'مفرد' },
{ contractNumber: '404', contractor: 'مطلق الغويري للمقاولات', roadNumber: '91755', roadName: 'النقيعة', roadType: 'مفرد' }                ];
            }
            if(appData.accidentCauses.length === 0) {
appData.accidentCauses = [
  "عدم الانتباه أدى إلى انحراف المركبة وانقلابها في الطريق.",
  "عدم الانتباه أدى إلى انحراف المركبة وانقلابها خارج الطريق.",
  "عدم الانتباه أدى إلى انحراف خارج الطريق.",
  "عدم الانتباه أدى إلى انحراف المركبة اصطدامها في الحاجز المعدني.",
  "عدم الانتباه أدى إلى انحراف المركبة اصطدامها في الحاجز المعدني ثم انقلابها خارج الطريق.",
  "عدم الانتباه أدى إلى انحراف المركبة اصطدامها في الحاجز المعدني وانقلابها.",
  "عدم الانتباه أدى إلى انحراف المركبة اصطدامها في الحاجز الخرساني",
  "عدم الانتباه أدى إلى انحراف المركبة اصطدامها في الحاجز الخرساني ثم انقلابها خارج الطريق.",
  "عدم الانتباه أدى إلى انحراف المركبة اصطدامها في الحاجز الخرساني وانقلابها.",
  "عدم الانتباه أدى إلى انحراف المركبة اصطدامها في السياج السلكي.",
  "عدم الانتباه أدى إلى انحراف المركبة اصطدامها في السياج السلكي وانقلابها.",
  "عدم الانتباه أدى إلى انحراف المركبة اصطدامها في السياج السلكي ثم انقلابها خارج الطريق.",
  "عدم الانتباه أدى إلى انحراف المركبة اصطدامها في السياج السلكي ثم انقلابها في الجزيرة الوسطية.",
  "عدم الانتباه أدى إلى اصطدام المركبة في السياج في الجزيرة الوسطية.",
  "عدم الانتباه أدى إلى اصطدام المركبة رقم 1 في المركبة رقم 2 من الخلف.",
  "عدم الانتباه أدى إلى اصطدام المركبة رقم 1 في المركبة رقم 2 من الجنب.",
  "عدم الانتباه أدى إلى اصطدام المركبة رقم 1 في المركبات رقم 2،3.",
  "عدم الانتباه أدى إلى اصطدام المركبة رقم 1 في المركبات رقم 2،3،4.",
  "عدم الانتباه أدى إلى اصطدام المركبة رقم 1 في المركبة رقم 2 من الخلف ثم انقلابها في الطريق.",
  "عدم الانتباه أدى إلى اصطدام المركبة رقم 1 في المركبة رقم 2 من الخلف ثم انقلابها خارج الطريق.",
  "عدم الانتباه أدى إلى اصطدام المركبة رقم 1 في المركبة رقم 2 من الخلف ثم انقلابها في الجزيرة الوسطية.",
  "انفجار الإطار الأمامي أدى إلى انحراف المركبة.",
  "انفجار الإطار الأمامي أدى إلى انحراف المركبة خارج الطريق.",
  "انفجار الإطار الأمامي أدى إلى انحراف المركبة وانقلابها في الطريق.",
  "انفجار الإطار الأمامي أدى إلى انحراف المركبة وانقلابها خارج الطريق.",
  "انفجار الإطار الأمامي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف.",
  "انفجار الإطار الأمامي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الجنب.",
  "انفجار الإطار الأمامي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها في الطريق.",
  "انفجار الإطار الأمامي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها خارج الطريق.",
  "انفجار الإطار الأمامي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها في الجزيرة الوسطية.",
  "انفجار الإطار الأمامي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها على السياج السلكي.",
  "انفجار الإطار الأمامي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها على السياج السلكي بالجزيرة الوسطية.",
  "انفجار الإطار الأمامي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها على الحاجز المعدني.",
  "انفجار الإطار الأمامي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها على الحاجز الخرساني.",
  "انفجار الإطار الخلفي أدى إلى انحراف المركبة.",
  "انفجار الإطار الخلفي أدى إلى انحراف المركبة خارج الطريق.",
  "انفجار الإطار الخلفي أدى إلى انحراف المركبة وانقلابها في الطريق.",
  "انفجار الإطار الخلفي أدى إلى انحراف المركبة وانقلابها خارج الطريق.",
  "انفجار الإطار الخلفي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف.",
  "انفجار الإطار الخلفي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الجنب.",
  "انفجار الإطار الخلفي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها في الطريق.",
  "انفجار الإطار الخلفي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها خارج الطريق.",
  "انفجار الإطار الخلفي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها في الجزيرة الوسطية.",
  "انفجار الإطار الخلفي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها على السياج السلكي.",
  "انفجار الإطار الخلفي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها على السياج السلكي بالجزيرة الوسطية.",
  "انفجار الإطار الخلفي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها على الحاجز المعدني.",
  "انفجار الإطار الخلفي أدى إلى انحراف المركبة رقم 1 واصطدامها في المركبة رقم 2 من الخلف ثم انقلابها على الحاجز الخرساني."
];            }
            if(appData.vehicleTypes.length === 0) {
                appData.vehicleTypes = ["تويوتا", "هونداي"];
            }
            if(appData.delayTypes.length === 0) {
                appData.delayTypes = [
                    "لا يوجد تباطؤ",
                    "يوجد تباطؤ بسبب إغلاق مسار واحد (مسار الشاحنات).",
                    "يوجد تباطؤ بسبب إغلاق مسار واحد (المسار الأوسط).",
                    "يوجد تباطؤ بسبب إغلاق مسار واحد (المسار السريع).",
                    "يوجد تباطؤ بسبب إغلاق مسار واحد.",
                    "يوجد تباطؤ بسبب إغلاق مسارين (مسار الشاحنات + المسار الأوسط).",
                    "يوجد تباطؤ بسبب إغلاق مسارين (مسار الشاحنات + المسار السريع).",
                    "يوجد تباطؤ بسبب إغلاق مسارين (المسار الأوسط + المسار السريع).",
                    "يوجد تباطؤ بسبب إغلاق مسارين.",
                    "يوجد تباطؤ بسبب اغلاق مسار الشاحنات + وإغلاق جزئي في المسار الأوسط.",
                    "يوجد تباطؤ بسبب اغلاق مسار السريع + وإغلاق جزئي في المسار الأوسط.",
                    "يوجد تباطؤ جزئي في مسار الشاحنات.",
                    "يوجد تباطؤ جزئي في مسار السريع.",
                    "يوجد تباطؤ بسبب إغلاق ثلاثة مسارات.",
                    "الطريق مغلق بالكامل"
                ];
            }
            if(appData.weatherDamages.length === 0) {
                appData.weatherDamages = ["لا يوجد أضرار حتى الآن"];
            }
             if(appData.contractors.length === 0) {
                appData.contractors = ["مطلق الغويري للمقاولات"];
            }
        }

        function saveData(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
            appData[key] = data;
        }

        function updateAllUI() {
            updateSettingsList('roads', 'roads-list', item => 
                `عقد ${item.contractNumber} | طريق ${item.roadNumber} | ${item.roadName} (${item.roadType}) | ${item.contractor}`
            );
            
            updateSettingsList('contractors', 'contractors-list-settings', item => item);
            updateSettingsList('vehicleTypes', 'vehicles-list-settings', item => item);
            updateSettingsList('accidentCauses', 'causes-list-settings', item => item);
            updateSettingsList('damageTypes', 'damages-list-settings', item => item);
            updateSettingsList('delayTypes', 'delays-list-settings', item => item);
            updateSettingsList('weatherConditions', 'weather-conditions-list-settings', item => item);
            updateSettingsList('weatherDamages', 'weather-damages-list-settings', item => item);

            updateDatalist('road-names-list', [...new Set(appData.roads.map(r => r.roadName))]);
            updateDatalist('road-numbers-list', [...new Set(appData.roads.map(r => r.roadNumber))]);
            updateDatalist('contract-numbers-list', [...new Set(appData.roads.map(r => r.contractNumber))]);
            
            updateDatalist('contractors-list', appData.contractors);
            updateDatalist('vehicle-types-list', appData.vehicleTypes);
            updateDatalist('causes-list', appData.accidentCauses);
            updateDatalist('damages-list', appData.damageTypes);
            updateDatalist('delays-list', appData.delayTypes);
            updateDatalist('weather-conditions-list', appData.weatherConditions);
            updateDatalist('weather-damages-list', appData.weatherDamages);
        }
        
        function updateSettingsList(key, listId, formatter) {
            const list = document.getElementById(listId);
            if (!list) return;
            list.innerHTML = '';
            appData[key].forEach((item, index) => {
                const itemEl = document.createElement('div');
                itemEl.className = 'data-item';
                itemEl.dataset.index = index;
                const formattedItem = formatter(item);
                itemEl.innerHTML = `<span>${formattedItem}</span>`;
                itemEl.addEventListener('click', (e) => {
                    const parentList = e.currentTarget.parentElement;
                    if (e.currentTarget.classList.contains('selected')) {
                        e.currentTarget.classList.remove('selected');
                    } else {
                        parentList.querySelectorAll('.data-item').forEach(el => el.classList.remove('selected'));
                        e.currentTarget.classList.add('selected');
                    }
                });
                list.appendChild(itemEl);
            });
        }

        function updateDatalist(datalistId, items) {
            const datalist = document.getElementById(datalistId);
            if (!datalist) return;
            datalist.innerHTML = '';
            items.forEach(item => {
                const option = document.createElement('option');
                option.value = item;
                datalist.appendChild(option);
            });
        }

        // --- Settings Page Functions ---
        function addRoadData() {
            const newRoad = {
                contractNumber: document.getElementById('new-contract-number').value.trim(),
                contractor: document.getElementById('new-contractor-name').value.trim(),
                roadNumber: document.getElementById('new-road-number').value.trim(),
                roadName: document.getElementById('new-road-name').value.trim(),
                roadType: document.getElementById('new-road-type-setting').value,
            };

            if (!newRoad.contractNumber || !newRoad.roadNumber || !newRoad.roadName || !newRoad.contractor) {
                showToast('الرجاء إدخال جميع بيانات الطريق والمقاول');
                return;
            }
            
            if (appData.roads.some(r => r.roadName === newRoad.roadName)) {
                showToast('اسم هذا الطريق موجود بالفعل');
                return;
            }
            
            appData.roads.push(newRoad);
            saveData('roads', appData.roads);

            // Also add the contractor to the contractors list if not already present
            if (!appData.contractors.includes(newRoad.contractor)) {
                appData.contractors.push(newRoad.contractor);
                saveData('contractors', appData.contractors);
            }

            updateAllUI();
            
            document.getElementById('new-contract-number').value = '';
            document.getElementById('new-contractor-name').value = '';
            document.getElementById('new-road-number').value = '';
            document.getElementById('new-road-name').value = '';
        }

        function addSimpleData(key, inputId) {
            const input = document.getElementById(inputId);
            const value = input.value.trim();
            if (!value) { showToast('الرجاء إدخال قيمة'); return; }
            if (appData[key].includes(value)) {
                showToast('هذه القيمة موجودة بالفعل');
                return;
            }
            appData[key].push(value);
            saveData(key, appData[key]);
            updateAllUI();
            input.value = '';
        }

        function deleteSimpleData(key) {
            const listId = key + '-list' + (key === 'roads' ? '' : '-settings');
            const list = document.getElementById(listId);
            const selectedItem = list ? list.querySelector('.data-item.selected') : null;

            if (!selectedItem) {
                showToast('الرجاء تحديد عنصر لحذفه');
                return;
            }

            showConfirmation('تأكيد الحذف', 'هل أنت متأكد من رغبتك في حذف هذا العنصر؟', () => {
                const index = parseInt(selectedItem.dataset.index, 10);
                if (!isNaN(index) && index >= 0 && index < appData[key].length) {
                    appData[key].splice(index, 1);
                    saveData(key, appData[key]);
                    updateAllUI();
                    showToast('تم الحذف بنجاح');
                }
            });
        }
        
        // --- Modal Functions ---
        const modal = document.getElementById('custom-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalText = document.getElementById('modal-text');
        const modalConfirmBtn = document.getElementById('modal-confirm-btn');
        const modalCancelBtn = document.getElementById('modal-cancel-btn');

        function showConfirmation(title, text, onConfirm) {
            modalTitle.textContent = title;
            modalText.textContent = text;
            modal.classList.add('show');

            modalConfirmBtn.onclick = () => {
                modal.classList.remove('show');
                if (onConfirm) onConfirm();
            };
            modalCancelBtn.onclick = () => modal.classList.remove('show');
        }

        // --- Report Generation & Copying ---
        function updateVehicles(type) {
            const countInput = document.getElementById(type + '-vehicles-count');
            if (!countInput) return;
            const count = parseInt(countInput.value) || 0;
            const container = document.getElementById(type + '-vehicles-container');
            container.innerHTML = '';
            
            for (let i = 1; i <= count; i++) {
                const vehicleHTML = 
                    '<div class="vehicle-item">' +
                        '<label> ' + i + ': 🚘 نوعها :</label>' +
                        '<input type="text" class="form-control ' + type + '-vehicle-type" list="vehicle-types-list" placeholder="اكتب أو اختر">' +
                        '<label> رقم اللوحة :</label>' +
                        '<div class="form-row">' +
                            '<input type="text" class="form-control" placeholder="حروف اللوحة">' +
                            '<span>/</span>' +
                            '<input type="text" class="form-control" placeholder="أرقام اللوحة">' +
                        '</div>' +
                    '</div>';
                container.innerHTML += vehicleHTML;
            }
        }

        function copyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.top = '-9999px';
            textArea.style.left = '-9999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                document.execCommand('copy');
                showToast('تم نسخ وحفظ التقرير بنجاح!');
            } catch (err) {
                showToast('فشل نسخ التقرير.');
            }
            document.body.removeChild(textArea);
        }

        function copyReport(type) {
            const getElementValue = (id) => document.getElementById(id) ? document.getElementById(id).value.trim() : '';
            const getRadioValue = (name) => {
                const radio = document.querySelector('input[name="' + name + '"]:checked');
                return radio ? radio.value : 'لم يحدد';
            };

            const titleMap = {
                fatal: '🔴 بلاغ عاجل بوقوع حادث مروري 🔴',
                dangerous: '🔴 بلاغ عاجل بوقوع حادث مروري 🔴',
                injury: '🟡 بلاغ عاجل بوقوع حادث مروري 🟡',
                normal: '🔵 بلاغ عاجل بوقوع حادث مروري 🔵'
            };

            let reportText = titleMap[type] + '\n\n';
            reportText += '🔳 رقم البلاغ في رقابة +: (' + getElementValue(type + '-report-number') + ')\n\n';

            reportText += '📍 معلومات الموقع\n';
            reportText += '🛣 اسم الطريق : ' + getElementValue(type + '-road-name') + '\n';
            reportText += '🛣 نوع الطريق : ' + getElementValue(type + '-road-type') + '\n';
            reportText += '🛣 رقم الطريق : ' + getElementValue(type + '-road-number') + '\n';
            reportText += '🛣 العلامة الكيلومترية: (' + getElementValue(type + '-km') + ' + ' + getElementValue(type + '-meter') + ')\n';
            reportText += '🛣 الاتجاه : ' + getElementValue(type + '-direction') + '\n';
            reportText += '🛣 وصف الموقع : ' + getElementValue(type + '-location-desc') + '\n';
            reportText += '🛣 رقم العقد : ' + getElementValue(type + '-contract-number') + '\n';
            reportText += '🛣 اسم المقاول : ' + getElementValue(type + '-contractor') + '\n\n';

            reportText += '🛑 نتيجة الحادث\n';
            reportText += '⛑ عدد الإصابات : ' + getElementValue(type + '-injuries') + '\n';
            reportText += '⛑ عدد الوفيات : ' + getElementValue(type + '-deaths') + '\n';
            reportText += '⛑ التلفيات: ' + getElementValue(type + '-damages') + '\n\n';

            const vehiclesCount = parseInt(getElementValue(type + '-vehicles-count'), 10) || 0;
            reportText += '🚙 عدد السيارات :' + vehiclesCount + '\n';
            const vehicleElements = document.querySelectorAll('#' + type + '-vehicles-container .vehicle-item');
            vehicleElements.forEach((vehicle, index) => {
                const vehicleType = vehicle.querySelector('.' + type + '-vehicle-type').value;
                const plateLetters = vehicle.querySelectorAll('input')[1].value;
                const plateNumbers = vehicle.querySelectorAll('input')[2].value;
                reportText += (index + 1) + ': 🚘 نوعها : ' + (vehicleType || 'غير محدد') + '\n';
                reportText += '  رقم اللوحة : (' + (plateLetters || 'غير محدد') + ' / ' + (plateNumbers || 'غير محدد') + ')\n';
            });
            reportText += '\n';

            reportText += '📃 سبب الحادث : ' + getElementValue(type + '-cause') + '.\n\n';

            reportText += '■ الساعة: ' + getElementValue(type + '-time') + '\n';
            reportText += '■ التاريخ: ' + getElementValue(type + '-date') + '\n';
            reportText += '■ اليوم : ' + getElementValue(type + '-day') + '\n\n';

            reportText += '🗒 معلومات عامة\n';
            reportText += '🏁 زمن تباطؤ حركة المرور: ' + getElementValue(type + '-traffic-delay') + '\n';
            reportText += '🏞 الحالة الجوية : ' + getElementValue(type + '-weather') + '\n';
            reportText += '🛣 حالة الطريق : ' + getElementValue(type + '-road-condition') + '\n';
            reportText += '👓 وضوح الرؤية : ' + getElementValue(type + '-visibility') + '\n\n';

            reportText += '🚨 الإجراء الذي تم من قبل المقاول\n';
            reportText += '• 1️⃣ تأمين موقع الحادث .\n';
            reportText += '• 2️⃣ ' + getRadioValue(type + '-cleaning') + '.\n';
            reportText += '• 3️⃣ وضع وسائل السلامة .\n\n';

            reportText += '🚧 المرور والسلامة بالمشروع 🚧';

            copyTextToClipboard(reportText);

            try {
                const reportData = {
                    type: 'accident-' + type,
                    date: new Date().toISOString(),
                    content: reportText
                };
                let allReports = JSON.parse(localStorage.getItem('allReports') || '[]');
                allReports.push(reportData);
                localStorage.setItem('allReports', JSON.stringify(allReports));
            } catch (e) {
                console.error("Failed to save report to localStorage", e);
            }
        }
        
        function copyWeatherReport(type) {
            let reportText = '';
            const getElementValue = (id) => document.getElementById(id) ? document.getElementById(id).value.trim() : '';
            
            const titleMap = {
                'rain': '🔵 (تقرير حالة مطرية) 🔵',
                'rain-followup': '🟡 ( تقرير حالة مطرية ) 🟡',
                'sandstorm': '🟠 ( تقرير عاصفة ترابية ) 🟠',
                'waterpool': '🔴 ( تقرير تجمع مياه ) 🔴',
                'flood': '🔴 ( تقرير جريان سيول منقول ) 🔴',
                'erosion': '🔴 ( تقرير انجراف ترابي ) 🔴',
                'rockfall': '🔴 ( تقرير تساقط صخور ) 🔴'
            };

            reportText = titleMap[type] + '\n\n';
            reportText += '🔳 رقم البلاغ في رقابة +: (' + getElementValue(type + '-report-number') + ')\n';
            if (type === 'rain-followup') {
                reportText += '⬛ الطريق: (' + getElementValue(type + '-road-name') + ') ( الطريق مستلم من الأمانة )\n';
            } else {
                reportText += '⬛ الطريق: (' + getElementValue(type + '-road-name') + ')\n';
            }
            reportText += '⬛ العقد : (' + getElementValue(type + '-contract-number') + ')\n';
            reportText += '⬛ رقمه : (' + getElementValue(type + '-road-number') + ')\n';
            reportText += '⬛ نوعه : (' + getElementValue(type + '-road-type') + ')\n';
            
            let kmRange = '';
            if (document.getElementById(type + '-km2')) { 
                 kmRange = `${getElementValue(type + '-km1')} + ${getElementValue(type + '-meter1')}) إلى (${getElementValue(type + '-km2')} + ${getElementValue(type + '-meter2')}`;
            } else {
                 kmRange = `${getElementValue(type + '-km1')} + ${getElementValue(type + '-meter1')}`;
            }
            reportText += '⬛ العلامة: : (' + kmRange + ')\n';
            
            if (document.getElementById(type + '-location')) {
                reportText += '🟦 الموقع: (' + getElementValue(type + '-location') + ')\n';
            }
            reportText += '🟦 وصف الموقع: (' + getElementValue(type + '-location-desc') + ')\n';
            
            if (document.getElementById(type + '-condition')) {
                reportText += '🟦 حالة الامطار: (' + getElementValue(type + '-condition') + ')\n';
            }
             if (document.getElementById(type + '-sandstorm-condition')) {
                reportText += '🟦 حالة العاصفة: (' + getElementValue(type + '-condition') + ')\n';
            }
            if (document.getElementById(type + '-intensity')) {
                reportText += '🟦 شدة السيول: (' + getElementValue(type + '-intensity') + ')\n';
            }
            if (document.getElementById(type + '-level')) {
                reportText += '🟦 منسوب التجمع: (' + getElementValue(type + '-level') + ')\n';
            }
            
            reportText += '🟥 الاضرار: (' + getElementValue(type + '-damages') + ')\n';
            
            if (document.getElementById(type + '-traffic')) {
                reportText += '🚘 حركة المركبات: (' + getElementValue(type + '-traffic') + ')\n';
            }
            
            reportText += '📆 اليوم والتاريخ: (' + getElementValue(type + '-date') + ')\n';
            reportText += '🕙 الساعة: (' + getElementValue(type + '-time') + ')';
            
            copyTextToClipboard(reportText);

            try {
                const reportData = {
                    type: 'weather-' + type,
                    date: new Date().toISOString(),
                    content: reportText
                };
                let allReports = JSON.parse(localStorage.getItem('allReports') || '[]');
                allReports.push(reportData);
                localStorage.setItem('allReports', JSON.stringify(allReports));
            } catch (e) {
                console.error("Failed to save weather report to localStorage", e);
            }
        }

        function generateReport() {
            const startDate = document.getElementById('report-start-date').value;
            const endDate = document.getElementById('report-end-date').value;
            const outputDiv = document.getElementById('report-output');
            const printBtn = document.getElementById('print-report-btn');

            if (!startDate || !endDate) {
                showToast('الرجاء تحديد تاريخ البدء والانتهاء');
                return;
            }

            const start = new Date(startDate);
            const end = new Date(endDate);
            end.setHours(23, 59, 59, 999);

            const allReports = JSON.parse(localStorage.getItem('allReports') || '[]');
            const filteredReports = allReports.filter(report => {
                const reportDate = new Date(report.date);
                return reportDate >= start && reportDate <= end;
            });

            if (filteredReports.length === 0) {
                outputDiv.innerHTML = '<p style="text-align: center; padding: 20px;">لا توجد بلاغات في الفترة المحددة.</p>';
                outputDiv.style.display = 'block';
                printBtn.style.display = 'none';
                return;
            }

            const accidentTypes = {
                'accident-fatal': 0,
                'accident-dangerous': 0,
                'accident-injury': 0,
                'accident-normal': 0
            };
            const weatherTypes = {
                'weather-rain': 0,
                'weather-rain-followup': 0,
                'weather-sandstorm': 0,
                'weather-waterpool': 0,
                'weather-flood': 0,
                'weather-erosion': 0,
                'weather-rockfall': 0
            };

            filteredReports.forEach(report => {
                if (report.type in accidentTypes) {
                    accidentTypes[report.type]++;
                } else if (report.type in weatherTypes) {
                    weatherTypes[report.type]++;
                }
            });

            const totalAccidents = Object.values(accidentTypes).reduce((a, b) => a + b, 0);
            const totalWeather = Object.values(weatherTypes).reduce((a, b) => a + b, 0);

            let reportHTML = `
                <div id="printable-report">
                    <h3 style="text-align: center; color: var(--primary-color);">ملخص البلاغات من ${startDate} إلى ${endDate}</h3>
                    <h4 style="color: var(--primary-color); border-bottom: 2px solid var(--secondary-color); padding-bottom: 5px;"><i class="fas fa-car-crash"></i> بلاغات الحوادث (الإجمالي: ${totalAccidents})</h4>
                    <ul style="list-style-type: none; padding-right: 0;">
                        <li style="margin-bottom: 8px;">حوادث وفيات: <strong>${accidentTypes['accident-fatal']}</strong></li>
                        <li style="margin-bottom: 8px;">حوادث خطرة: <strong>${accidentTypes['accident-dangerous']}</strong></li>
                        <li style="margin-bottom: 8px;">حوادث إصابات: <strong>${accidentTypes['accident-injury']}</strong></li>
                        <li style="margin-bottom: 8px;">حوادث عادية: <strong>${accidentTypes['accident-normal']}</strong></li>
                    </ul>
                    <h4 style="color: var(--primary-color); border-bottom: 2px solid var(--secondary-color); padding-bottom: 5px;"><i class="fas fa-cloud-sun-rain"></i> بلاغات الطقس (الإجمالي: ${totalWeather})</h4>
                    <ul style="list-style-type: none; padding-right: 0;">
                        <li style="margin-bottom: 8px;">حالة مطرية: <strong>${weatherTypes['weather-rain']}</strong></li>
                        <li style="margin-bottom: 8px;">حالة مطرية: <strong>${weatherTypes['weather-rain-followup']}</strong></li>
                        <li style="margin-bottom: 8px;">عاصفة ترابية: <strong>${weatherTypes['weather-sandstorm']}</strong></li>
                        <li style="margin-bottom: 8px;">تجمع مياه: <strong>${weatherTypes['weather-waterpool']}</strong></li>
                        <li style="margin-bottom: 8px;">جريان سيول: <strong>${weatherTypes['weather-flood']}</strong></li>
                        <li style="margin-bottom: 8px;">انجراف ترابي: <strong>${weatherTypes['weather-erosion']}</strong></li>
                        <li style="margin-bottom: 8px;">تساقط صخور: <strong>${weatherTypes['weather-rockfall']}</strong></li>
                    </ul>
                </div>
            `;

            outputDiv.innerHTML = reportHTML;
            outputDiv.style.display = 'block';
            printBtn.style.display = 'inline-flex';
        }

        function printReport() {
            const reportContent = document.getElementById('printable-report').innerHTML;
            const printWindow = window.open('', '', 'height=600,width=800');
            printWindow.document.write('<html><head><title>طباعة التقرير</title>');
            printWindow.document.write('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">');
            printWindow.document.write('<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">');
            printWindow.document.write('<style>body { font-family: "Tajawal", sans-serif; direction: rtl; } ul { list-style-type: none; padding-right: 0; } li { margin-bottom: 8px; }</style>');
            printWindow.document.write('</head><body>');
            printWindow.document.write(reportContent);
            printWindow.document.write('</body></html>');
            printWindow.document.close();
            printWindow.focus();
            setTimeout(() => { printWindow.print(); }, 500);
        }

        // --- START: Weekly Accident Statistics Script ---
        function initializeWeeklyStatsCalculator() {
            const accidentsInput = document.getElementById('stats-accidents');
            const injuriesInput = document.getElementById('stats-injuries');
            const damagesInput = document.getElementById('stats-damages');
            const fatalitiesInput = document.getElementById('stats-fatalities');
            
            const accidentsTotal = document.getElementById('stats-accidents-total');
            const injuriesTotal = document.getElementById('stats-injuries-total');
            const damagesTotal = document.getElementById('stats-damages-total');
            const fatalitiesTotal = document.getElementById('stats-fatalities-total');
            
            const startDay = document.getElementById('stats-start-day');
            const startMonth = document.getElementById('stats-start-month');
            const startYear = document.getElementById('stats-start-year');
            const endDay = document.getElementById('stats-end-day');
            const endMonth = document.getElementById('stats-end-month');
            const endYear = document.getElementById('stats-end-year');
            
            const reportDiv = document.getElementById('weekly-stats-report-output');
            const updateBtn = document.getElementById('stats-update-report');
            const copyBtn = document.getElementById('stats-copy-whatsapp');
            
            document.getElementById('stats-accidents-plus').addEventListener('click', () => {
                accidentsInput.value = parseInt(accidentsInput.value) + 1;
                updateTotals();
            });
            document.getElementById('stats-accidents-minus').addEventListener('click', () => {
                if (parseInt(accidentsInput.value) > 0) {
                    accidentsInput.value = parseInt(accidentsInput.value) - 1;
                    updateTotals();
                }
            });
            
            document.getElementById('stats-injuries-plus').addEventListener('click', () => {
                injuriesInput.value = parseInt(injuriesInput.value) + 1;
                updateTotals();
            });
            document.getElementById('stats-injuries-minus').addEventListener('click', () => {
                if (parseInt(injuriesInput.value) > 0) {
                    injuriesInput.value = parseInt(injuriesInput.value) - 1;
                    updateTotals();
                }
            });
            
            document.getElementById('stats-damages-plus').addEventListener('click', () => {
                damagesInput.value = parseInt(damagesInput.value) + 1;
                updateTotals();
            });
            document.getElementById('stats-damages-minus').addEventListener('click', () => {
                if (parseInt(damagesInput.value) > 0) {
                    damagesInput.value = parseInt(damagesInput.value) - 1;
                    updateTotals();
                }
            });
            
            document.getElementById('stats-fatalities-plus').addEventListener('click', () => {
                fatalitiesInput.value = parseInt(fatalitiesInput.value) + 1;
                updateTotals();
            });
            document.getElementById('stats-fatalities-minus').addEventListener('click', () => {
                if (parseInt(fatalitiesInput.value) > 0) {
                    fatalitiesInput.value = parseInt(fatalitiesInput.value) - 1;
                    updateTotals();
                }
            });
            
            accidentsInput.addEventListener('change', updateTotals);
            injuriesInput.addEventListener('change', updateTotals);
            damagesInput.addEventListener('change', updateTotals);
            fatalitiesInput.addEventListener('change', updateTotals);
            
            updateBtn.addEventListener('click', updateReport);
            copyBtn.addEventListener('click', copyWeeklyStatsReport);
            
            function updateTotals() {
                accidentsTotal.textContent = parseInt(accidentsInput.value) || 0;
                injuriesTotal.textContent = parseInt(injuriesInput.value) || 0;
                damagesTotal.textContent = parseInt(damagesInput.value) || 0;
                fatalitiesTotal.textContent = parseInt(fatalitiesInput.value) || 0;
            }
            
            function formatDateNumber(num) {
                return num < 10 ? '0' + num : num;
            }
            
            function updateReport() {
                const accidentsCount = parseInt(accidentsInput.value) || 0;
                const injuriesCount = parseInt(injuriesInput.value) || 0;
                const damagesCount = parseInt(damagesInput.value) || 0;
                const fatalitiesCount = parseInt(fatalitiesInput.value) || 0;

                const startDate = `${startYear.value}/${formatDateNumber(startMonth.value)}/${formatDateNumber(startDay.value)}`;
                const endDate = `${endYear.value}/${formatDateNumber(endMonth.value)}/${formatDateNumber(endDay.value)}`;
                
                reportDiv.innerHTML = `*إحصائية الحوادث* على *طرق العقد* رقم ( *404* )
مشروع صيانة أداء طرق *المدينة المنورة/ مكة المكرمة*
إحصائية الحوادث على طرق العقد
*من* ${startDate} *وحتى* ${endDate}
*عدد الحوادث :* ( ${accidentsCount} ).
*عدد التلفيات :* ( ${damagesCount} ).
*عدد الوفيات :* ( ${fatalitiesCount} ).
*عدد الإصابات :* ( ${injuriesCount} ).`;
            }
            
            function copyWeeklyStatsReport() {
                updateReport(); 
                const reportText = reportDiv.innerText;
                copyTextToClipboard(reportText);
            }

            function setInitialDates() {
                const today = new Date();
                const sevenDaysAgo = new Date();
                sevenDaysAgo.setDate(today.getDate() - 6);

                endDay.value = today.getDate();
                endMonth.value = today.getMonth() + 1;
                endYear.value = today.getFullYear();

                startDay.value = sevenDaysAgo.getDate();
                startMonth.value = sevenDaysAgo.getMonth() + 1;
                startYear.value = sevenDaysAgo.getFullYear();
                
                updateTotals();
                updateReport();
            }
            
            setInitialDates();
        }
        
        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('year').textContent = new Date().getFullYear();
            goHome();
            updateDateTime();
            setInterval(updateDateTime, 60000);
            
            loadAllData();
            updateAllUI();

            ['fatal', 'dangerous', 'injury', 'normal'].forEach(type => updateVehicles(type));

            initializeWeeklyStatsCalculator();
            
            document.getElementById('excel-file')?.addEventListener('change', (event) => {
                const file = event.target.files[0];
                if (!file) return;
                
                document.getElementById('file-name').textContent = `الملف المختار: ${file.name}`;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = new Uint8Array(e.target.result);
                        const workbook = XLSX.read(data, { type: 'array' });
                        const firstSheetName = workbook.SheetNames[0];
                        const worksheet = workbook.Sheets[firstSheetName];
                        const json = XLSX.utils.sheet_to_json(worksheet);

                        if (json.length === 0) {
                            showToast('الملف فارغ أو بصيغة غير صحيحة.');
                            return;
                        }
                        
                        let addedCount = 0;
                        let skippedCount = 0;
                        
                        json.forEach(row => {
                            const roadData = {
                                contractNumber: row['رقم العقد'] ? String(row['رقم العقد']).trim() : null,
                                roadNumber: row['رقم الطريق'] ? String(row['رقم الطريق']).trim() : null,
                                roadName: row['اسم الطريق'] ? String(row['اسم الطريق']).trim() : null,
                                roadType: row['نوع الطريق'] ? String(row['نوع الطريق']).trim() : null,
                                contractor: row['اسم المقاول'] ? String(row['اسم المقاول']).trim() : null
                            };

                            if (roadData.contractNumber && roadData.roadNumber && roadData.roadName && roadData.roadType && roadData.contractor) {
                                const isDuplicate = appData.roads.some(r => r.roadName.trim() === roadData.roadName);
                                if (!isDuplicate) {
                                    appData.roads.push(roadData);
                                    if (!appData.contractors.includes(roadData.contractor)) {
                                        appData.contractors.push(roadData.contractor);
                                    }
                                    addedCount++;
                                } else {
                                    skippedCount++;
                                }
                            } else {
                                skippedCount++;
                            }
                        });

                        saveData('roads', appData.roads);
                        saveData('contractors', appData.contractors);
                        updateAllUI();
                        
                        let message = `تم استيراد ${addedCount} طريق جديد بنجاح!`;
                        if (skippedCount > 0) {
                            message += ` تم تخطي ${skippedCount} صف (مكرر أو بيانات ناقصة).`;
                        }
                        showToast(message);

                    } catch (err) {
                        console.error("Error processing Excel file:", err);
                        showToast('حدث خطأ أثناء معالجة الملف. تأكد من أن الملف غير تالف.');
                    } finally {
                        event.target.value = ''; 
                        document.getElementById('file-name').textContent = '';
                    }
                };
                reader.readAsArrayBuffer(file);
            });

            // --- Autofill Event Listeners ---
            const allReportTypes = [
                'fatal', 'dangerous', 'injury', 'normal',
                'rain', 'rain-followup', 'sandstorm', 'waterpool', 'flood', 'erosion', 'rockfall'
            ];

            allReportTypes.forEach(type => {
                const roadNameInput = document.getElementById(`${type}-road-name`);
                if (roadNameInput) {
                    roadNameInput.addEventListener('change', (e) => {
                        const selectedName = e.target.value;
                        // Find the specific road object from the stored data
                        const roadData = appData.roads.find(road => road.roadName === selectedName);

                        const roadTypeInput = document.getElementById(`${type}-road-type`);
                        const roadNumberInput = document.getElementById(`${type}-road-number`);
                        const contractNumberInput = document.getElementById(`${type}-contract-number`);
                        const contractorInput = document.getElementById(`${type}-contractor`);

                        if (roadData) {
                            // Autofill all related fields
                            if (roadTypeInput) roadTypeInput.value = roadData.roadType;
                            if (roadNumberInput) roadNumberInput.value = roadData.roadNumber;
                            if (contractNumberInput) contractNumberInput.value = roadData.contractNumber;
                            if (contractorInput) contractorInput.value = roadData.contractor;
                        } else {
                            // Optional: Clear fields if the road name is not found
                            if (roadTypeInput) roadTypeInput.value = '';
                            if (roadNumberInput) roadNumberInput.value = '';
                            if (contractNumberInput) contractNumberInput.value = '404'; // Reset to default
                            if (contractorInput) contractorInput.value = '';
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>
